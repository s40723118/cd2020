<h1>About</h1>
<p>Course Title: Collaborative Product Design and  Practice (short name: CD)</p>
<p>Repository: <a href="https://github.com/s40723118/cd2020">https://github.com/s40723118/cd2020</a></p>
<h2>Grouping</h2>
<h4>亂數分組:</h4>
<p style="padding-left: 30px;">Base upon the Dart + Python random grouping system and the <a href="https://github.com/mdecourse/wcms-scrum1">https://github.com/mdecourse/wcms-scrum1</a> (<a href="https://wcms-scrum1.herokuapp.com/gear_index">https://wcms-scrum1.herokuapp.com/gear_index</a>), we may be able to create more collaborative product design service.</p>
<p style="padding-left: 30px;">Flask Python programs can be deployed at Heroku or self install Ubuntu server. ( <a href="https://mdecp2018.github.io/finalproject-bgx/content/Heroku%20%E8%A8%AD%E5%AE%9A.html">https://mdecp2018.github.io/finalproject-bgx/content/Heroku%20%E8%A8%AD%E5%AE%9A.html</a>) </p>
<p><a href="https://mde.tw/cd2020/downloads/2020spring_cd_2a_list.txt">https://mde.tw/cd2020/downloads/2020spring_cd_2a_list.txt</a> was taken from <a href="https://osa.nfu.edu.tw/">https://osa.nfu.edu.tw/</a> on Feb. 19, 2020.</p>
<p>The most updated list: <a href="http://s1.mde.nfu.edu.tw:8000/?semester=1082&amp;courseno=0767">http://s1.mde.nfu.edu.tw:8000/?semester=1082&amp;courseno=0767</a> </p>
<p>semester: 1082</p>
<p>courseno for 2a:  0767</p>
<p>courseno for 2b: 0780</p>
<p>Under https protocol use port 7443, for http use port 8000.</p>
<p>學員名單 URL: <input id="studListUrl" size="70" type="text" value="http://s1.mde.nfu.edu.tw:8000/?semester=1082&amp;courseno=0767 "/><br/> <input id="submit" type="submit" value="開始分組"/><br/> <textarea cols="80" id="output" rows="10"></textarea></p>
<script src="https://mde.tw/cd2020/downloads/dart_ex/even_grouping/evenGrouping.js"></script>
<p><a href="https://dartpad.github.io/embed-html.html?gh_owner=mdecourse&amp;gh_repo=cd2020&amp;gh_path=downloads/dart_ex/even_grouping&amp;theme=dark">Dart source code for random grouping</a></p>
<h4>evenGrouping.dart:</h4>
<pre class="brush:dart;auto-links:false;toolbar:false" contenteditable="false">import 'dart:html';
 
  InputElement studListUrl = querySelector("#studListUrl");
  String studUrl;
  // 將 Label 改為 Textarea, 避免產生過程結果嵌入所在頁面
  TextAreaElement output = querySelector("#output");
 
main() {
  querySelector("#submit").onClick.listen((e) =&gt; grouping());
}
 
grouping() {
  output.innerHtml = "";
 
  if (studListUrl.value != "") {
    studUrl = studListUrl.value;
  } else {
    studUrl = 'https://mde.tw/group/downloads/2019fall_cp_1a_list.txt';
  }
 
  // 組序由 1 開始
  int gth = 1;
  // 迴圈序號變數
  int i;
  int j;
  int total;
  int inc;
  // 每組學員暫存數列
  var gpList = [];
  // 全班分組數列
  var group = [];
  // 各組人數數列
  var numList = [];
  var courseTitle = 'cd2020';
 
  HttpRequest.getString(studUrl).then((String resp) {
    // 利用 trim() 去除字串最後的跳行符號, 之後再利用 split() 根據 \n 轉為數列
    var studList = resp.trim().split("\n");
    // 數列利用 shuffle() 方法以隨機方法弄亂順序
    studList.shuffle();
    total = studList.length;
    output.text += "全班總計" + total.toString() + " 人\n";
    numList = getNumList(studList.length);
    inc = 0;
    for (i in numList){
      // 列印區隔符號
      output.text += '=' * 20 + "\n";
      output.text += "group $gth 有 " + i.toString() + " 人: \n";
      gpList = [];
      for (j = 0; j &lt; i; j++){
        output.text += studList[j+inc] + "\n";
        // 在各分組數列中加入將對應的學員學號
        gpList.add(studList[j+inc]);
      }
      gth = gth + 1;
      inc = inc + j;
        //output.text += studList[j] + "\n";
        // 逐步將各組暫存的分組數列加入全班分組數列中
      gpList.sort();
      group.add(gpList);
    }
    // 列出全班分組數列
    output.text += group.toString() + "\n";
    // 列出已經排序後的分組名單
    output.text += '=' * 25 + "\n";
    output.text += '以下為排序後的各組成員名單: \n';
    gth = 1;
    /*
    404231
    s4052
    4062
    s4072
    4082
    5072
    5083
    */
    // 先列出純文字以 \n 跳行組員資料
    for (i=0; i &lt; group.length; i++){
      // 列印區隔符號
      output.text += '=' * 20 + "\n";
      output.text += "group $gth \n";
      gpList = [];
      for (j=0; j &lt; group[i].length; j++){
        output.text += group[i][j] + "\n";
      }
      gth = gth + 1;
    }
    
    gth = 1;
    // 最後列出超文件以 &lt;br\&gt; 跳行組員資料, 包含倉儲與網站
    for (i=0; i &lt; group.length; i++){
      // 列印區隔符號
      output.text += '\n' + '=' * 30 + "&lt;br \&gt;";
      output.text += "group $gth &lt;br \&gt;";
      gpList = [];
      for (j=0; j &lt; group[i].length; j++){
          if (group[i][j].startsWith('4052') || group[i][j].startsWith('4072')) {
              output.text += "Repository: &lt;a href='https://github.com/s" + 
                                      group[i][j] + "/" + courseTitle + "'&gt;" + group[i][j] + 
                                      "&lt;/a&gt;" + " | Site: &lt;a href='https://s" + group[i][j] + 
                                      ".github.io/" + courseTitle + "'&gt;" + group[i][j] + 
                                      "&lt;/a&gt;&lt;br \&gt;";
          }
          else {
              output.text += "Repository: &lt;a href='https://github.com/" + 
                                      group[i][j] + "/" + courseTitle +"'&gt;" + group[i][j] + 
                                      "&lt;/a&gt;" + " | Site: &lt;a href='https://" + group[i][j] + 
                                      ".github.io/" + courseTitle + "'&gt;" + group[i][j] + 
                                      "&lt;/a&gt;&lt;br \&gt;";
          }
      }
      gth = gth + 1;
    }
  });
}
 
List getNumList(int total){
  // total student number
  // int total = 65;
  // initial each group expect to be "eachGrp" number of people
  int eachGrp = 10;
  // may divide into "grpNum" number of group
  int grpNum = total ~/ eachGrp;
  // vacant list
  var splits = [];
  // find remainder when total number divid into "grpNum" number of group
  int remainder = total % grpNum;
  // number of people in one group by calculation
  int calGrp = total ~/ grpNum;
 
  for (int i = 0; i &lt; grpNum; i++) {
    splits.add(calGrp);
  }
  //print(splits);
 
  for (int i = 0; i &lt; remainder; i++) {
    splits[i] += 1;
  }
  //print(splits);
  return splits;
 }</pre>
<h4>index.html:</h4>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">&lt;h1&gt;亂數分組:&lt;/h1&gt;
學員名單 URL: &lt;input type="text" id="studListUrl" size="50" value="https://mde.tw/wcm2020/downloads/2020spring_wcm_1a_list.txt"&gt;&lt;br /&gt;
&lt;input type="submit" value="開始分組" id="submit"&gt;&lt;br /&gt;
&lt;textarea id="output" cols="80" rows="10"&gt;&lt;/textarea&gt;</pre>
<h4>style.css:</h4>
<pre class="brush:css;auto-links:false;toolbar:false" contenteditable="false">body {
  color: white;
  font-size: 20px;
}

input, select, textarea {
font-size: 100%;
}</pre>
<h4>get_student.py</h4>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">from flask import Flask, request 
from flask_cors import CORS

import requests
import bs4
import ssl

'''
https://s1.mde.nfu.edu.tw:7443/?semester=1082&amp;courseno=0767
cd
2a 1082/0767
2b 1082/0780

2a 1072/0777
2b 1072/0790
2a 1062/0788
2a 1062/0802

wcm
1082/0744

1072/0754
1062/0765

wcmj
1082/2418
'''

app = Flask(__name__)
CORS(app)

@app.route('/studlist')
@app.route('/')
def studlist():
    semester = request.args.get('semester')
    courseno = request.args.get('courseno')
    if semester == None:
        semester = '1082'
    if courseno == None:
        courseno = '0744'
    
    url = 'https://osa.nfu.edu.tw/query/studlist_ajax.php'
    post_var = {'pselyr': semester, 'pseqno': courseno}

    result = requests.post(url, data = post_var)

    soup = bs4.BeautifulSoup(result.content, 'lxml')
    table = soup.find('table', {'class': 'tbcls'})
    data = []
    rows = table.find_all('tr')
    for row in rows:
        cols = row.find_all('td')
        cols = [ele.text.strip() for ele in cols]
        data.append([ele for ele in cols if ele]) # Get rid of empty values
    output = ""
    for i in data[2:]:
        #print(i[0])
        output +=i[0] + "\n"
    return output
    #return  str(pselyr) + " + " +str(pseqno)

# 即使在近端仍希望以 https 模式下執行
context = ssl.SSLContext(ssl.PROTOCOL_TLSv1_2)
context.load_cert_chain('localhost.crt', 'localhost.key')

# 取 flaskapp.py 中的 uwsgi 變數設定
uwsgi = False
if uwsgi:
    # 表示程式在雲端執行
    application = app
else:
    # 表示在近端執行, 以 python3 wsgi.py 執行
    app.run(host='127.0.0.1', port=5443, debug=True, ssl_context=context)
</pre>
<h4>nginx sites-available/default settings:</h4>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">server {
    listen 8000;
    server_name s1.mde.nfu.edu.tw;
    charset utf-8;
    
    listen 7443 ssl;
 
    location /static {
        alias /home/kmol2019/course_studlist/static/;
    }
 
    location / {
        include uwsgi_params;
        uwsgi_pass  127.0.0.1:8087;
    }
    
    ssl_certificate /etc/stunnel/localhost.crt;
    ssl_certificate_key /etc/stunnel/localhost.key;
    ssl_session_timeout 5m;
    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
    ssl_prefer_server_ciphers on;
    try_files $uri $uri/ =404;
}</pre>
<h4>uwsgi7.ini</h4>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">[uwsgi]
socket = 127.0.0.1:8087
uid = kmol2019
gid = kmol2019
plugins-dir = /usr/lib/uwsgi/plugins/
plugin = python3
master = true
logto = /var/log/uwsgi/emperor.log
logfile-chown = kmol2019:kmol2019
processes = 4
threads = 2
chdir = /home/kmol2019/course_studlist
wsgi-file = /home/kmol2019/course_studlist/get_student.py</pre>
<h4>/etc/systemd/system/cmsimfly.service</h4>
<h2>Grading</h2>
<h4>Grading percentage:</h4>
<p style="padding-left: 30px;">Self-evaluation (30%)</p>
<p style="padding-left: 30px;">Peer Review (30%)</p>
<p style="padding-left: 30px;">Teacher Grading (40%)</p>
<h4>Grading content:</h4>
<p style="padding-left: 30px;">Attendance, Github commits, website and blog maintenance, and note taking (40%)</p>
<p style="padding-left: 30px;">Assignment 1 presentation (Youtube and Reveal.js) (10%)</p>
<p style="padding-left: 30px;">Assignment 2 presentation (Youtube and Reveal.js) (10%)</p>
<p style="padding-left: 30px;">Assignment 3 presentation (Youtube and Reveal.js) (10%)</p>
<p style="padding-left: 30px;">Final Project (Youtube, Reveal.js and pdf report) (30%)</p>
<p style="padding-left: 30px;"></p>
<h2>KMOL2020</h2>
<h4>Create Portable Programming System for Windows 10:</h4>
<p>PortableGit: <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p>
<p>MSYS2: <a href="https://www.msys2.org/">https://www.msys2.org/</a></p>
<p>Python 3.8.1: <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></p>
<p style="padding-left: 30px;">CMSiMDE: <a href="https://github.com/mdecourse/cmsimde">https://github.com/mdecourse/cmsimde</a></p>
<p style="padding-left: 60px;">Flask: <a href="https://github.com/pallets/flask">https://github.com/pallets/flask</a></p>
<p style="padding-left: 60px;">lxml: <a href="https://github.com/lxml/lxml">https://github.com/lxml/lxml</a></p>
<p style="padding-left: 60px;">bs4: <a href="https://pypi.org/project/beautifulsoup4/">https://pypi.org/project/beautifulsoup4/</a></p>
<p style="padding-left: 60px;">markdown: <a href="https://github.com/Python-Markdown/markdown">https://github.com/Python-Markdown/markdown</a></p>
<p style="padding-left: 60px;">flask-cors: <a href="https://github.com/corydolphin/flask-cors">https://github.com/corydolphin/flask-cors</a></p>
<p style="padding-left: 60px;">Pelican: <a href="https://github.com/getpelican/pelican">https://github.com/getpelican/pelican</a></p>
<p style="padding-left: 60px;">Reveal.js: <a href="https://github.com/hakimel/reveal.js/">https://github.com/hakimel/reveal.js/</a></p>
<p style="padding-left: 30px;">Leo Editor: <a href="https://github.com/leo-editor/leo-editor">https://github.com/leo-editor/leo-editor</a></p>
<p>SciTE: <a href="https://www.scintilla.org/SciTEDownload.html">https://www.scintilla.org/SciTEDownload.html</a></p>
<p>Tiny C Compiler: <a href="https://github.com/TinyCC/tinycc">https://github.com/TinyCC/tinycc</a></p>
<p>Fossil SCM: <a href="https://www.fossil-scm.org/">https://www.fossil-scm.org/</a></p>
<p>Jupyterlab: <a href="https://github.com/jupyterlab/jupyterlab">https://github.com/jupyterlab/jupyterlab</a></p>
<p>Flutter: <a href="https://github.com/flutter/flutter">https://github.com/flutter/flutter</a></p>
<p>Visual Studio Code: <a href="https://github.com/microsoft/vscode">https://github.com/microsoft/vscode</a></p>
<h3>Python</h3>
<p>Create a Portable Python:</p>
<p>Install Python 3.8.1 without pip</p>
<p><a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">PYTHONPATH</a></p>
<p><a href="https://bootstrap.pypa.io/get-pip.py">get-pip.py</a></p>
<h4>start.bat</h4>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">@echo off
set Disk=y
subst %Disk%: "data"

%Disk%:

set HomePath=%Disk%:\home_mdecourse
set HomeDrive=%Disk%:\home_mdecourse
set Home=%Disk%:\home_mdecourse
set USERPROFILE=%Disk%:\home_mdecourse

REM 將系統 Python 程式的 io 設為 utf-8
set PYTHONIOENCODING="utf-8"

set PYTHONPATH=%Disk%:\py38\DLLs;%Disk%:\py38\Lib;%Disk%:\py38\Lib\site-packages;
set PYTHONHOME=%Disk%:\py38

REM for flutter
set java_home=%Disk%:\java\jdk8u222-b10
set ANDROID_SDK_home=%Disk%:\home_mdecourse
set GRADLE_USER_home=%Disk%:\home_mdecourse
set ANDROID_SDK_ROOT=%Disk%:\android\sdk
set ANDROID_Home=%Disk%:\android\sdk\tools

REM for putty
set GIT_HOME=%CDisk%:\portablegit\bin\
set GIT_SSH=%Disk%:\putty\plink.exe

set path_python=%Disk%:\py38;%Disk%:\py38\Scripts;
set path_msys2=%Disk%:\msys64\mingw64\bin;
REM coreutils is for compiling fossil scm
set path_coreutils=%Disk%:\coreutils-5.3.0\bin;%Disk%:\depends22_x64;
set path_tcc=%Disk%:\tcc;
set path_cmake=%Disk%:\cmake-3.10.1-win64-x64\bin;
set path_nodejs=%Disk%:\nodejs;%Disk%:\nodejs\appdata\roaming\npm;
set path_git=%Disk%:\portablegit\bin;
set path_xming=%Disk%:\Xming;
set path_latex=%Disk%:\Pandoc;%Disk%:\TinyTeX\bin\win32;
set path_flutter=%Disk%:\java\jdk8u222-b10\bin;%Disk%:\flutter\bin;%Disk%:\Android\sdk;%Disk%:\Android\sdk\tools;%Disk%:\Android\sdk\tools\bin;%Disk%:\Android\sdk\platform-tools;%Disk%:\flutter\bin\cache\dart-sdk\bin;%Disk%:\vscode;
set path_putty=%Disk%:\putty;

path=%Disk%:;%path_python%;%path_msys2%;%path_tcc%;%path_git%;%path_cmake%;%path_coreutils%;%path_flutter%;%path_putty%;%path_latex%;%path%;

start /MIN cmd.exe
start /MIN cmd.exe
start /MIN cmd.exe
start /MIN cmd.exe

start /MIN %Disk%:\kmolScite\SciTE.exe
start /MIN %Disk%:\kmolScite\SciTE.exe

Exit</pre>
<h3>Microcontroller</h3>
<p>Login to your gm email and download </p>
<p style="padding-left: 30px;"><a href="https://drive.google.com/file/d/1mmmgiOFO-SVaj8LNID8gTWYgt6aKr6HN/view?usp=sharing">2019_ArduinoApplied.pdf</a></p>
<p style="padding-left: 30px;">and </p>
<p style="padding-left: 30px;"><a href="https://drive.google.com/file/d/1vzffEBY1HK9yY1-t5MXO1TdeoGh2BHLq/view?usp=sharing">2018_BeginningRoboticsWithRaspberry.pdf</a></p>
<h4>Arduino Simulator</h4>
<p style="padding-left: 30px;"><a href="https://www.sites.google.com/site/unoardusim/">https://www.sites.google.com/site/unoardusim/</a></p>
<h4>PIC Simulator Labortory</h4>
<p style="padding-left: 30px;"><a href="https://github.com/lcgamboa/picsimlab">https://github.com/lcgamboa/picsimlab</a></p>
<p style="padding-left: 30px;"><a href="https://lcgamboa.github.io/">https://lcgamboa.github.io/</a></p>
<p style="padding-left: 30px;"><a href="https://mplabxpress.microchip.com/mplabcloud/ide">https://mplabxpress.microchip.com/mplabcloud/ide</a></p>
<p style="padding-left: 30px;">Login to your gm account and <a href="https://drive.google.com/drive/folders/1ucVrqPEzyidXDzM6H1K4U6uhzkvTKFSd?usp=sharing">download all Microchip related tools</a>.</p>
<h4>Rasberry Pi</h4>
<p style="padding-left: 30px;"><a href="https://github.com/gavinlyonsrepo/RpiMotorLib">https://github.com/gavinlyonsrepo/RpiMotorLib</a></p>
<h4>Python-exemplary</h4>
<p style="padding-left: 30px;"><a href="http://www.python-exemplary.com/">http://www.python-exemplary.com/</a></p>
<h3>MSYS2</h3>
<p><a href="https://www.msys2.org/">https://www.msys2.org/</a></p>
<p>Y:\py38\Lib\distutils\distutils.cfg</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">[build]
compiler=mingw32

[build_ext]
compiler=mingw32</pre>
<h4>Reference</h4>
<p style="padding-left: 30px;"><a href="https://github.com/KmolYuan/pyslvs/blob/master/platform/set_pycompiler.bat">https://github.com/KmolYuan/pyslvs/blob/master/platform/set_pycompiler.bat</a></p>
<h3>Pyslvs-UI</h3>
<h4>Compile and install python_solvespace library</h4>
<p>Pyslvs-UI requires <a href="https://github.com/mdecourse/solvespace">https://github.com/mdecourse/solvespace</a> python_solvespace pyd dynamic library of the python branch.</p>
<p style="padding-left: 30px;">git clone --recurse-submodules <a href="https://github.com/mdecourse/solvespace.git">https://github.com/mdecourse/solvespace.git</a> </p>
<p style="padding-left: 30px;">cd solvespace</p>
<p style="padding-left: 30px;">git checkout python</p>
<p style="padding-left: 30px;">cd cython</p>
<p style="padding-left: 30px;">python setup.py install</p>
<h4>Compile and install Pyslvs-UI</h4>
<p style="padding-left: 30px;">git clone --recurse-submodules <a href="https://github.com/mdecourse/pyslvs-UI.git">https://github.com/mdecourse/pyslvs-UI.git</a></p>
<p style="padding-left: 30px;">cd pyslvs-UI</p>
<p style="padding-left: 30px;">python -m pip install -r requirements.txt</p>
<p style="padding-left: 30px;"><span>mingw32-make install</span></p>
<p style="padding-left: 30px;"><span></span></p>
<h1>Topics</h1>
<blockquote>
<p><span style="background-color: #ccffcc;">The products of the twenty - first century should be a sustainable service, designed to provide users with a quality of life experience.</span></p>
<p><span style="background-color: #ccffcc;">二十一世紀的產品應該是一種永續服務, 旨在為用戶提供優質的生活體驗.</span></p>
<p><span style="background-color: #ccffcc;">KMOLab</span></p>
</blockquote>
<h4>Topic 0: From Digital to Industrial + Engineering Product Design Collaboration</h4>
<p>Login to your gm email account and download</p>
<p style="padding-left: 30px;"><a href="https://drive.google.com/open?id=1YHQwYduSMisiJQS-Jr_HhJghzIqP_SBc">DigitalProductCollaboration.pdf</a></p>
<p style="padding-left: 30px;"><a href="https://drive.google.com/file/d/1KRwEcU7Vn65xL6twStG_EWaTKz1Ag8PG/view?usp=sharing">IndustrialAndEngineeringProductDesignCollaboration.pdf</a></p>
<p>Can we create an english-english vocabulary collection service?</p>
<p style="padding-left: 30px;"><a href="https://www.autoitscript.com/forum/files/file/419-dictionary_bigdb/">https://www.autoitscript.com/forum/files/file/419-dictionary_bigdb/</a></p>
<h4>Topic 1: Mechanical Design Process</h4>
<p>Login to your gm email account and download <a href="https://drive.google.com/file/d/13THamnfayiRT4Wa9KzmjXQSP4ZW2jIej/view?usp=sharing">MechanicalDesignProcess.pdf</a>.</p>
<p style="padding-left: 30px;">(Can we build online tools to facilitate these processes?)</p>
<p style="padding-left: 30px;">Successful Design</p>
<p style="padding-left: 30px;">Building the Design</p>
<p style="padding-left: 30px;">Structural Considerations</p>
<p style="padding-left: 30px;">Materials and Processes</p>
<h4>Topic 2: Mechatronic System Design</h4>
<p>Login to your gm email account and download <a href="https://drive.google.com/file/d/1KRb8vX_LB_3hkLwK1z1LOP8wl_StIZOR/view?usp=sharing">MSModelingAndTFApproaches.pdf</a>.</p>
<p style="padding-left: 30px;"><span>(Can we build online tools to facilitate these processes?)</span></p>
<p style="padding-left: 30px;">Mechatronic Systems</p>
<p style="padding-left: 30px;">Mathematical Modeling</p>
<p style="padding-left: 30px;">Transfer Function Approaches</p>
<p>Login to your gm email account and download <a href="https://drive.google.com/file/d/1y0QH6vI8uMymK9JI35EShVFS40Q8uwwq/view?usp=sharing">MechatronicDesignCases.pdf</a>.</p>
<p style="padding-left: 30px;">DC Motor Velocity and Position Control</p>
<p style="padding-left: 30px;">Balancing Robot Control</p>
<p style="padding-left: 30px;">Magnetic Levitation System</p>
<h4>Topic 3: Mechatronic Future and Challenges</h4>
<p><span>Login to your gm email account and download <a href="https://drive.google.com/file/d/118Vho5ECQfQ1XK_hnlptpCVdNgQ00HuZ/view?usp=sharing">MechaFutureAndChallenges.pdf</a>.</span></p>
<p style="padding-left: 30px;">Mechatronic Futures</p>
<p style="padding-left: 30px;">Mechatronics Disrupted</p>
<p style="padding-left: 30px;">Challenges in Mechatronics</p>
<p><span>Login to your gm email account and download <a href="https://drive.google.com/file/d/1AFADmyNrwprE7AesaFAecZZquIfzbLw-/view?usp=sharing">MechaEducFutureNeed.pdf</a>.</span></p>
<p style="padding-left: 30px;">Education to meet future need</p>
<p>Login to your gm email account and <a href="https://drive.google.com/drive/folders/1h2bc9HqF3yhB3BwZwJD_vPUdOPGroQtv?usp=sharing">download all reference files</a>.</p>
<h2>Mechanical Design</h2>
<p>Frontend - backend and design process</p>
<p>Frontend Dart:</p>
<pre class="brush:dart;auto-links:false;toolbar:false" contenteditable="false">// 因為要使用超文件表單, 因此導入 html 程式庫
import "dart:html";

// 每一個 Dart 程式都從 main() 開始執行
main() {
  // 透過表單, 取得使用者輸入的溫度值, 語法為數字加上 C 或 F
  InputElement tempInput = querySelector("#temp");
  querySelector("#submit").onClick.listen((e) =&gt; pyconvert(tempInput.value));
}

pyconvert(String data) {
  // 準備將轉換結果顯示在 output Label 區
  LabelElement output = querySelector("#output");
  // 將 data 送到遠端 python flask 程式區
  request(data);
} // pyconvert

request(String asset) {
  var response = document.querySelector('#response');
  var url = 'http://localhost:5000/${asset}';

  HttpRequest.getString(url, onProgress: (_) =&gt; response.text = 'Loading ...')
      .then((resp) =&gt; response.setInnerHtml('&lt;pre&gt;${resp}&lt;/pre&gt;'))
      .catchError((error) =&gt; response.text = 'ERROR !!!: ${error.toString()}');
}

/* 以下為 Python Flask 伺服器端的程式碼, 可以接受 Dart 前端送來的字串, 進行溫度轉換運算後, 將結果傳回
import flask
# 導入 flask_cors 模組中的 CORS
# 目的在讓伺服器可以被遠端的 Dart 程式跨網域擷取資料
from flask_cors import CORS

app = flask.Flask(__name__)
# 讓應用程式啟動後, 可以跨網域被截取資料
CORS(app, support_credentials=False)
global data

@app.route('/', methods =['POST', 'GET'])
def root():
    if flask.request.method == 'POST': 
        data = flask.request.form['data'] 
        print(data)
        resp = {"data": data}
        output = flask.json.dumps(data)
    else:
        # 將 Python 中的 dictionary 資料透過 json 格式送出後
        # 讓遠端的 Dart 程式可以擷取
        data = {"a": 1, "b": data+"yen", "c": "字串"}
        output = flask.json.dumps(data)
    return output
    
@app.route('/&lt;name&gt;', methods=['POST', 'GET'])
def convert(name):
    #name[-1] 為字串最後一個字元
    # name[:-1] 則為數字
    if name[-1] is "F" or name[-1] is "f":
        # 表示要將華氏溫度轉為攝氏
        return FtoC(name[:-1])
    else:
        return CtoF(name[:-1])
    
#celsius = 5/9 ( fahrenheit − 32)
#定義一個 celsius 轉 fahrenheit  函式
def CtoF(c):
    return "攝氏" + c + "度=華氏" + str(round(int(c)*9/5 + 32, 2)) + "度"

#定義一個 celsius 轉 fahrenheit  函式
def FtoC(f):
    return "華氏" + f + "度=攝氏" + str(round((int(f) - 32)*5/9, 2)) + "度"


if __name__ == '__main__':
    # 內建的 Flask Web 啟動埠號為 5000
    app.run()
*/</pre>
<p>Backend Python:</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import flask
# 導入 flask_cors 模組中的 CORS
# 目的在讓伺服器可以被遠端的 Dart 程式跨網域擷取資料
from flask_cors import CORS
 
app = flask.Flask(__name__)
# 讓應用程式啟動後, 可以跨網域被截取資料
CORS(app, support_credentials=False)
global data
 
@app.route('/', methods =['POST', 'GET'])
def root():
    if flask.request.method == 'POST': 
        data = flask.request.form['data'] 
        print(data)
        resp = {"data": data}
        output = flask.json.dumps(data)
    else:
        # 將 Python 中的 dictionary 資料透過 json 格式送出後
        # 讓遠端的 Dart 程式可以擷取
        data = {"a": 1, "b": data+"yen", "c": "字串"}
        output = flask.json.dumps(data)
    return output
     
@app.route('/&lt;name&gt;', methods=['POST', 'GET'])
def convert(name):
    #name[-1] 為字串最後一個字元
    # name[:-1] 則為數字
    if name[-1] is "F" or name[-1] is "f":
        # 表示要將華氏溫度轉為攝氏
        return FtoC(name[:-1])
    else:
        return CtoF(name[:-1])
     
#celsius = 5/9 ( fahrenheit − 32)
#定義一個 celsius 轉 fahrenheit  函式
def CtoF(c):
    return "攝氏" + c + "度=華氏" + str(round(int(c)*9/5 + 32, 2)) + "度"
 
#定義一個 celsius 轉 fahrenheit  函式
def FtoC(f):
    return "華氏" + f + "度=攝氏" + str(round((int(f) - 32)*5/9, 2)) + "度"
 
 
if __name__ == '__main__':
    # 內建的 Flask Web 啟動埠號為 5000
    app.run()</pre>
<p>What can these programs do to the mechanical design process?</p>
<p style="padding-left: 30px;"><a href="https://flutter.dev/">Flutter</a> mobile frontend and Python backend?</p>
<p style="padding-left: 30px;">Learning Python?</p>
<p style="padding-left: 60px;">Login to gm account and download</p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/17_LCSvwgtnIG8FnpezfUlEdbo3Y6G6CP/view?usp=sharing">2019_ABeginnersGuideToPython3Programming.pdf</a></p>
<p style="padding-left: 90px;">and</p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/1z6v5j4TtFwBmo00URNpBBoLfQVmlTSZv/view?usp=sharing">2019_AdvancedGuideToPython3Programming.pdf</a></p>
<p style="padding-left: 30px;">Learning Dart and Flutter?</p>
<p style="padding-left: 60px;">Login to gm account and download </p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/1RyCFxXrh0skRAWafX7nyYFVHuMO68iTS/view?usp=sharing">2020_ QuickStartGuideToDartProgramming.pdf</a></p>
<p style="padding-left: 90px;">and</p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/1RyCFxXrh0skRAWafX7nyYFVHuMO68iTS/view?usp=sharing">2019_BeginningAppDevelopmentWithFlutter.pdf</a></p>
<p style="padding-left: 30px;"><a href="https://flutter.dev/">Flutter</a> mobile frontend, Python backend and <a href="https://www.coppeliarobotics.com/">CoppeliaSim</a> through <a href="https://www.coppeliarobotics.com/helpFiles/en/remoteApiOverview.htm">remote API</a>?</p>
<p style="padding-left: 30px;"><a href="https://flutter.dev/">Flutter</a> mobile frontend, <a href="https://cython.org/">Cython</a> backend and <a href="https://github.com/solvespace/solvespace">Solvespace</a> through <a href="https://github.com/KmolYuan/solvespace/tree/python">Python Geometric Constranin Solver</a>?</p>
<p style="padding-left: 60px;">Learning C++?</p>
<p style="padding-left: 90px;">Login to gm account and download <a href="https://drive.google.com/file/d/1KZCqddCxs1CCK-thaYpM1ssuz3nMNn3t/view?usp=sharing">2018_Book_BeginningC17.pdf</a>.</p>
<p style="padding-left: 90px;">Also check into <a href="https://www.msys2.org/">MSYS2</a> for reference.</p>
<p style="padding-left: 30px;">Where can we save the data during a web/mobile frontend and backend based design process?</p>
<p style="padding-left: 60px;">Login to gm account and download</p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/1u3PHIbGWz3r4bct_molJg8FODkS8tf02/view?usp=sharing">2019_BuildingRESTAPIsWithFlask.pdf</a> </p>
<p style="padding-left: 90px;">and</p>
<p style="padding-left: 90px;"><a href="https://drive.google.com/file/d/1REP4GKqo_RkLmPj2MqiuG-YR59TTqHPF/view?usp=sharing">2010_TheDefinitiveGuideToSQLite.pdf</a></p>
<p style="padding-left: 60px;">Also check into <a href="https://github.com/chiamingyen/pygrouf">https://github.com/chiamingyen/pygrouf</a>, <a href="https://github.com/mdecourse/wcms-scrum1">https://github.com/mdecourse/wcms-scrum1</a> and <a href="https://wcms-scrum1.herokuapp.com/gear_index">https://wcms-scrum1.herokuapp.com/gear_index</a> for reference.</p>
<h4>Recall application of <a href="https://www.google.com/search?q=pro%2Fweblink">Pro/Weblink</a></h4>
<p>Take <a href="https://support.ptc.com/help/creo/creo_pma/usascii/index.html#page/fundamentals/fundamentals/fund_three_sub/About_Pro_Web_Link.html">Pro/Weblink</a> as an example. Javascript is used as the frontend working with a local host Pro/Engineer under the trusted Internet Explorer environment to enable programmable 3d mechanical Part and Assembly processes.</p>
<p>Download <a href="https://drive.google.com/file/d/1CKB_lZ0ujiUC3zx2juRACUJaA8VCAHhW/view?usp=sharing">2002_ProEweblinkUserGuide.pdf</a></p>
<h3>Topic1Author</h3>
<p>Login to your gm account and download <a href="/get_page/ME%20Credentials/2019_DesigningElectronicProductEnclosures.pdf">2019_DesigningElectronicProductEnclosures.pdf</a> (where the topic1 material taken from)</p>
<h4>Author’s Credentials</h4>
<p>By listing some of the corporations where I have worked, this should provide some background on where my experience comes from.</p>
<h4><a href="https://www.lincolnelectric.com/">Lincoln Electric Company</a></h4>
<p>I started in the drafting room running blue prints in 1964. By taking night school classes in drafting, I soon was given the chance to apprentice as a tool and die designer where I got experience in the basic skills of designing jigs and fixtures. Lincoln Electric is "world famous" for their profit sharing program and work ethic. (I would later teach beginning drafting at Chabot College, California, in 1980).</p>
<h4><a href="https://www.llnl.gov/">Lawrence Livermore National Laboratory</a></h4>
<p>My first job after getting my master’s degree in mechanical engineering (from the University of Arizona, 1977) was in the Material Fabrication Group. Our mission to design and build a lathe capable of 0.000001 inch accuracy provided great experience. Additional experience in the design of experiments for laboratory programs proved invaluable for future work.</p>
<h4><a href="https://www.intel.com/content/www/us/en/homepage.html">Intel Corporation</a></h4>
<p>This is my first experience with the design of computer housings for "silicon valley." Intel was just expanding beyond chips and printed circuit board products, and they had plans to get into building computer systems. I’m on the cover of "Intel News" shown trying to measure fan noise of a prototype "tower computer" in 1982. I was very fortunate to experience the tremendous work ethic in the culture at Intel.</p>
<h4><a href="https://en.wikipedia.org/wiki/Sytek_Inc">Sytek Corporation</a></h4>
<p>This is my first design position where I had the responsibility of taking my own design thru all the stages of prototyping, tooling, testing, and manufacturing delivery. We installed our first CAD systems (CADAM) in 1986.</p>
<p>This is the first company where I assumed some management responsibility and thus saw a more complete picture of where (mechanical) product design fits into a larger picture of the entire product delivery process.</p>
<h4><a href="https://www.trimble.com/">Trimble Navigation Limited</a></h4>
<p>This is my first designer position where I designed and documented with a CAD system (AutoCAD).</p>
<p>My work here spanned nearly 25 years from 1988 thru 2013. We installed our first 3D CAD system (ProEngineer) in 1992. Trimble’s products (portable GPS instruments) are intended to work in outdoor environments, and their customers need these products to function under adverse conditions (shock, vibration, temperature extremes, rain).</p>
<p>I spent my early years in the Marine Division, moved on to the Survey Division, and became manager of a Mechanical Engineering Group in 1995. While manager, I was responsible for budgeting, resourcing, prioritization, design, and documentation. I also served as (overall) project manager on a number of projects and thus experienced how the "mechanical piece" fits into the overall design of products.<br/> <br/>All of the above corporations had different accepted working processes for overall product design and different corporate cultures to operate in. It’s hoped that most of the words written here serve as a valuable contribution to the reader’s design process regardless of the corporate cultures they are in. The above work resume certainly spans<br/>a history of both how computers came to be used in the design process and how the industries evolved in their design processes. The design tools and products made for the marketplace will continue to evolve in the future, but we will still need basic mechanical design fundamentals to positively affect the overall product design process.</p>
<h1>Assignments</h1>
<h4>Assignment 1:</h4>
<p><span style="background-color: #ffff00;">Due March 25, 2020</span> for class 2a and <span style="background-color: #ffff00;">March 26, 2020</span> for class 2b.</p>
<p style="padding-left: 30px;">1. Describe how to do an efficient random grouping for this course or do the roll calling randomly?</p>
<p style="padding-left: 30px;">2. Describe how to prepare a portable Python programming system for Windows 10 64bit system to allow one the maintain <a href="https://github.com/mdecourse/cmsimde">CMSiMDE</a> website, <a href="https://github.com/getpelican/pelican">Pelican blog</a> and <a href="https://github.com/hakimel/reveal.js/">Reveal.js</a> presentation on <a href="https://github.com/">Github</a>?</p>
<p style="padding-left: 30px;">3. What do you need to know from <a href="http://www.coppeliarobotics.com/helpFiles/index.html">http://www.coppeliarobotics.com/helpFiles/index.html</a> to implement a four-wheeled robot?</p>
<h4><span>Assignment 2:</span></h4>
<p><span><span><span style="background-color: #ffff00;">Due April 22, 2020</span> for class 2a and <span style="background-color: #ffff00;">April 23, 2020</span> for class 2b.</span></span></p>
<p style="padding-left: 30px;"><span><span>1. According to the material of Topic 0 and Topic 1, can you describe specifically what the mechanical design team need to do for accomplishing Assignment 1's  four wheeled robot.</span></span></p>
<p style="padding-left: 30px;"><span>2. What do you need to know from <a href="https://cyberbotics.com/doc/guide/index">https://cyberbotics.com/doc/guide/index</a> <span> to implement a four-wheeled robot?</span></span></p>
<h4>W9: Midterm presentation</h4>
<h4><span>Assignment 3:</span></h4>
<p><span><span>Due <span style="background-color: #ffff00;">May 27, 2020</span> for class 2a and <span style="background-color: #ffff00;">May 28, 2020</span> for class 2b.</span></span></p>
<p style="padding-left: 30px;">According to the reading of Topic 2 and Topic 3, propose a Mechatronic project by using <a href="https://www.coppeliarobotics.com/">CoppeliaSim</a> or <a href="https://cyberbotics.com/">Webots</a> and <a href="https://www.onshape.com/">Onshape</a>.</p>
<h4>Final project:</h4>
<p><span style="background-color: #ffff00;">Due June 24, 2020.</span></p>
<p style="padding-left: 30px;">Realize your Mechatronic project and conclude with a presentation video and pdf report.</p>
<h1>Reference</h1>
<h2>Dart</h2>
<p><a href="https://flutter.dev/docs/reference/tutorials">https://flutter.dev/docs/reference/tutorials</a></p>
<p><a href="https://www.raywenderlich.com/4529993-getting-started-with-flutter">https://www.raywenderlich.com/4529993-getting-started-with-flutter</a></p>
<p><a href="https://www.raywenderlich.com/flutter/">https://www.raywenderlich.com/flutter/</a></p>
<p><a href="https://github.com/SpinlockLabs/github.dart">https://github.com/SpinlockLabs/github.dart</a></p>
<p><a href="https://book.flutterchina.club/">https://book.flutterchina.club/</a></p>
<p><a href="https://github.com/CarGuo/gsy_flutter_book">https://github.com/CarGuo/gsy_flutter_book</a></p>
<p><a href="https://www.youtube.com/playlist?list=PLV2Iw811jLpWdAHToUqTuWYhYbjVfwS80">https://www.youtube.com/playlist?list=PLV2Iw811jLpWdAHToUqTuWYhYbjVfwS80</a></p>
<p><a href="https://flutterbyexample.com/">https://flutterbyexample.com/</a></p>
<h2>SQLite</h2>
<p>Build iOS Database Apps with Swift and SQLite (2016)</p>
<p style="padding-left: 30px;"><a href="https://link.springer.com/book/10.1007/978-1-4842-2232-4">https://link.springer.com/book/10.1007/978-1-4842-2232-4</a></p>
<p>Introducing SQLite for Mobile Developers (2015)</p>
<p style="padding-left: 30px;"><a href="https://link.springer.com/book/10.1007/978-1-4842-1766-5">https://link.springer.com/book/10.1007/978-1-4842-1766-5</a></p>
<p>The Definitive Guide to SQLite (2010)</p>
<p style="padding-left: 30px;"><a href="https://link.springer.com/book/10.1007/978-1-4302-3226-1">https://link.springer.com/book/10.1007/978-1-4302-3226-1</a></p>
<h4>SQLite3 and C:</h4>
<h4 style="padding-left: 30px;">Compiled with <a href="https://www.msys2.org/">MSYS2</a> and <a href="https://packages.msys2.org/package/mingw-w64-x86_64-sqlite3">SQLite3</a>:</h4>
<p style="padding-left: 30px;">gcc sqlite_ex.c -lsqlite3 -o sqlite_ex.exe</p>
<p style="padding-left: 30px;">sqlite_ex.c query vocabulary from <a href="https://github.com/mdecourse/lookupdict/blob/master/webster_vocabulary.sqlite">https://github.com/mdecourse/lookupdict/blob/master/webster_vocabulary.sqlite</a></p>
<h4><span>sqlite_ex.c source code:</span></h4>
<pre class="brush:cpp;auto-links:false;toolbar:false" contenteditable="false">#include &lt;sqlite3.h&gt;
#include &lt;stdio.h&gt;

int callback(void *, int, char **, char **);

int main(void) {
    
    sqlite3 *db;
    char *err_msg = 0;
    
    int rc = sqlite3_open("webster_vocabulary.sqlite", &amp;db);
    
    if (rc != SQLITE_OK) {
        
        fprintf(stderr, "Cannot open database: %s\n", 
                sqlite3_errmsg(db));
        sqlite3_close(db);
        
        return 1;
    }
    
    char *sql = "SELECT * FROM word where word='ABORT'";
        
    rc = sqlite3_exec(db, sql, callback, 0, &amp;err_msg);
    
    if (rc != SQLITE_OK ) {
        
        fprintf(stderr, "Failed to select data\n");
        fprintf(stderr, "SQL error: %s\n", err_msg);

        sqlite3_free(err_msg);
        sqlite3_close(db);
        
        return 1;
    } 
    
    sqlite3_close(db);
    
    return 0;
}

int callback(void *NotUsed, int argc, char **argv, 
                    char **azColName) {
    
    NotUsed = 0;
    
    for (int i = 0; i &lt; argc; i++) {

        printf("%s = %s\n", azColName[i], argv[i] ? argv[i] : "NULL");
    }
    
    printf("\n");
    
    return 0;
}</pre>
<h4>SQLite3 and Python:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/mdecourse/wcms-scrum1">https://github.com/mdecourse/wcms-scrum1</a></p>
<h4>SQLite3 and Dart:</h4>
<h4 style="padding-left: 30px;">dart:ffi only for mobile and desktop</h4>
<p style="padding-left: 60px;">from <a href="https://www.sqlite.org/download.html">https://www.sqlite.org/download.html</a> download C source code as an amalgamation</p>
<p style="padding-left: 60px;">use <a href="https://www.msys2.org/">MSYS2</a>:</p>
<p style="padding-left: 90px;">gcc -shared sqlite3.c -o sqlite3.dll</p>
<p style="padding-left: 60px;">to get sqlite3.dll</p>
<p style="padding-left: 60px;">use git sparse-checkout from <a href="https://github.com/dart-lang/sdk">https://github.com/dart-lang/sdk</a> get</p>
<p style="padding-left: 60px;"><a href="https://github.com/dart-lang/sdk/tree/master/samples/ffi/sqlite">https://github.com/dart-lang/sdk/tree/master/samples/ffi/sqlite</a></p>
<p style="padding-left: 90px;">cd y:\tmp<br/>mkdir dart_sqlite<br/>cd dart_sqlite<br/>git init<br/>git config core.sparsecheckout true<br/>git remote add -f origin https://github.com/dart-lang/sdk.git<br/>echo samples/ffi/sqlite &gt;&gt; .git/info/sparse-checkout<br/>git pull origin master</p>
<p style="padding-left: 60px;">cd y:\tmp\<span>samples\ffi\sqlite</span></p>
<p style="padding-left: 60px;"><span>pub get</span></p>
<p style="padding-left: 60px;"><span>copy sqlite3.dll and <a href="https://github.com/mdecourse/lookupdict/blob/master/webster_vocabulary.sqlite">webster_vocabulary.sqlite</a> into y:\tmp\<span>samples\ffi\sqlite\example</span></span></p>
<h4 style="padding-left: 60px;"><span><span>use SciTE to execute main.dart:</span></span></h4>
<pre class="brush:dart;auto-links:false;toolbar:false" contenteditable="false">import "../lib/sqlite.dart";

void main() {
  Database d = Database("webster_vocabulary.sqlite");

  Result result = d.query("select * from word where word='ABORT';");
  for (Row r in result) {
    //String name = r.readColumnByIndex(1);
    String word = r.readColumn("word");
    String defn = r.readColumn("defn");
    //print("$name $word $defn");
    print("單字:$word 解說: $defn");
  }
  d.close();
}
</pre>
<h4 style="padding-left: 30px;"><a href="https://pub.dev/packages/js">package:js</a> is for web</h4>
<p style="padding-left: 60px;"><a href="https://github.com/simolus3/moor/blob/master/moor/lib/src/web/sql_js.dart">https://github.com/simolus3/moor/blob/master/moor/lib/src/web/sql_js.dart</a></p>
<p>References:</p>
<p style="padding-left: 30px;"><a href="https://pub.dev/packages/f_orm_m8_sqlite">https://pub.dev/packages/f_orm_m8_sqlite</a></p>
<p style="padding-left: 30px;"></p>
<p style="padding-left: 60px;"></p>
<h2>Fossil SCM</h2>
<p><a href="https://www.fossil-scm.org/">https://www.fossil-scm.org/</a></p>
<h2>Jupyterlab</h2>
<p><a href="https://github.com/jupyterlab/jupyterlab">https://github.com/jupyterlab/jupyterlab</a></p>
<h2>AI</h2>
<p><a href="https://artint.info/2e/html/ArtInt2e.html">https://artint.info/2e/html/ArtInt2e.html</a></p>
<p><a href="https://github.com/SullyChen/Autopilot-TensorFlow">https://github.com/SullyChen/Autopilot-TensorFlow</a></p>
<p><a href="https://towardsdatascience.com/how-a-high-school-junior-made-a-self-driving-car-705fa9b6e860">https://towardsdatascience.com/how-a-high-school-junior-made-a-self-driving-car-705fa9b6e860</a></p>
<p><a href="https://github.com/UvinduW/RCAutopilot">https://github.com/UvinduW/RCAutopilot</a></p>
<h1>每週進度</h1>
<h2>w2</h2>
<p><em><strong>python 3.8.2</strong></em></p>
<p><img alt="" height="405" src="/images/2020-04-06_21-18-59.png" width="720"/></p>
<h2>w3</h2>
<p><em><strong>了解四輪機器人</strong></em></p>
<p>翻譯的網址:<a href="https://www.coppeliarobotics.com/helpFiles/index.html">https://www.coppeliarobotics.com/helpFiles/index.html</a></p>
<p>翻譯</p>
<p>路徑位置和長度計算方法<span>(Path position and length calculation methods)</span></p>
<p>沿著路徑對象，可以定義固有位置。該位置（也稱為路徑位置）與路徑對象的位置不同。雖然路徑對象的位置是路徑對象原點的位置（在選擇路徑時顯示為白色線框立方體），但是路徑位置或固有路徑位置是沿路徑的位置值</p>
<p>路徑的<span>Bezier</span>點可以是不同的，也可以是重合的：想像一個焊接機器人，其末端執行器是焊接設備的尖端；在兩個連續的<span>Bezier</span>點之間，末端執行器可以：</p>
<p>在不改變方向的情況下執行平移（即沿著直線）（兩個<span>Bezier</span>點是不同的，但方向相同）。</p>
<p>執行平移並更改方向（兩個<span>Bezier</span>點是不同的，並且方向不同）。</p>
<p>在不改變位置的情況下執行旋轉（即更改方向）（兩個<span>Bezier</span>點重合但方向不同）。</p>
<p>此外，在某些情況下，我們希望焊炬遵循預定的路徑，在某個特定位置暫停（例如，處理較大的焊接點），然後沿該路徑繼續前進。為了正確處理上述<span>3</span>種情況和特殊的暫停情況，重要的是能夠唯一地識別沿路徑（即路徑位置<span>*</span>）的任何位置<span>*</span>（廣義上的位置）以及路徑長度<span>*</span>（從更廣泛的意義上講是長度）。為此，用戶可以選擇幾種位置計算方法：<span> </span></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積線性變化。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式1.jpg" width="92"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積角度<span>**</span>變化。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式2.jpg" width="107"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積（線性變化<span>+</span>角度<span>**</span>變化）。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式3.jpg" width="139"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積最大值（線性變化，角度<span>**</span>變化）。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式4.jpg" width="169"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積（線性變化，如果不為零，否則為角度<span>**</span>）。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式5.jpg" width="328"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的累積（角度<span>**</span>變化，如果不為零，否則為線性變化）。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式6.jpg" width="347"/></p>
<p>路徑位置<span>*</span>被描述為沿路徑的（線性變化，角度<span>**</span>變化）的累積歐幾里德距離。路徑長度<span>*</span>由下式給出：<img alt="" height="24" src="/images/公式7.jpg" width="145"/></p>
<p>其中Δ<span>l</span>和Δα分別是兩個連續的<span>Bezier</span>點之間的線性和角度變化。角度<span>**</span>變化是規則角度變化乘以角度係數<span>c</span>。<span> c</span>稱為角度到線性的轉換係數，並且可以將角度值和線性值組合在一起。這意味著沿路徑的位置<span>*</span>或路徑長度<span>*</span>始終以線性單位（例如米）給出，而與上面選擇的位置計算方法無關。</p>
<p><span> </span>默認情況下，紅色標記的項為零。該術語可以看作是<span>Bezier</span>點（或路徑控制點）的虛擬距離或第四坐標（即每個<span>Bezier</span>點將由方向和位置（<span>x</span>，<span>y</span>，<span>z</span>，<span>w</span>）定義，其中<span>w</span>是第四坐標）。這對於沿路徑歸檔暫停點很有用。是兩個連續的<span>Bezier</span>點之間的虛擬距離變化。<span> d</span>是虛擬距離變化的比例因子（例如，如果<span>d</span>加倍，則所有暫停點的暫停持續時間將是兩倍）。為簡化起見，在以下內容中我們將不再提及該術語並將其設為零。</p>
<p>以下示例闡明了位置和長度計算概念：</p>
<p><img alt="" height="256" src="/images/計算1.jpg" width="600"/></p>
<p><img alt="" height="220" src="/images/計算2.jpg" width="450"/></p>
<p><img alt="" height="205" src="/images/計算3.jpg" width="600"/></p>
<p><img alt="" height="192" src="/images/計算4.jpg" width="450"/></p>
<p>要歸檔沿路徑的特定點處的運動暫停，請執行以下操作：創建3個相同的路徑控制點（位置和方向完全重合），並為中間控制點指定一個虛擬距離值，該值不得為零。在下面的示例中，在3個重合點的虛擬距離為2（在第一和中間重合控制點之間為1，在中間和第三重合控制點之間為1）。如果某個對像以每秒1米的速度沿路徑行進，則它將在重合的控制點處記錄2秒的暫停</p>
<p><img alt="" height="213" src="/images/計算5.jpg" width="285"/></p>
<p></p>
<p>沿路徑運動<span>(Movement along a Path)</span></p>
<p>當前固有路徑位置在路徑上顯示為紅色球形（如果啟用了路徑位置顯示）。在模擬過程中，可以隨時使用<span>sim.setPathPosition</span>來控制球沿路徑的位置。確保了解如何計算路徑位置或路徑長度。</p>
<p>要實際使對象沿路徑移動，首先需要將對象附加到虛擬對象，然後分配虛擬對像以遵循路徑位置（帶有可選的偏移量）。</p>
<p>導入和導出路徑<span>(Importing and exporting paths)</span></p>
<p>路徑導入<span>/</span>導出功能可在<span>CSV</span>文件（逗號分隔值）上運行，該<span>CSV</span>文件可以用簡單的文本編輯器創建或讀取，但也可以輕鬆地導入<span>/</span>導出到<span>Microsoft Excel</span>等應用程序中。</p>
<p>導入路徑</p>
<p><span>CoppeliaSim</span>的導入功能（<span>[</span>菜單欄<span>-&gt;</span>文件<span>-&gt;</span>導入<span>-&gt; CSV</span>的路徑<span>...]</span>）逐行讀取值，其中每行對應一個控制點。每行應採用以下格式設置：<span> </span></p>
<p><span>x</span>，<span>y</span>，<span>z</span>，<span>alpha</span>，<span>beta</span>，<span>gamma</span>，<span>relativeVelocity</span>，<span>BezierPointCount</span>，<span>interpolationFactor1</span>，<span>interpolationFactor2</span>，</p>
<p><span>virtualDistance</span>，<span>auxiliaryFlags</span>，<span>auxiliaryChannel1</span>，<span>auxiliaryChannel2</span>，<span>auxiliaryChannel3</span>，<span>auxiliaryChannel4</span></p>
<p>其中內容相對應的意思：</p>
<p><span> </span>（<span>x</span>，<span>y</span>，<span>z</span>）表示控制點在<span>METERS</span>中的位置</p>
<p>（α，β，γ）表示控制點的方向，以度數表示為歐拉角。默認值為（<span>0,0,0</span>）。</p>
<p>相對速度已棄用。設為<span>1.0</span></p>
<p><span>BezierPointCount</span>是控制點所需的<span>Bezier</span>點數。默認值為<span>1</span>。</p>
<p><span>InterpolationFactor1</span>和<span>InterpolationFactor2</span>是在路徑控制點和<span>Bezier</span>點部分中描述的插值因子。默認值為<span>0.5</span></p>
<p><span>VirtualDistance</span>：虛擬距離值，添加到該控制點位置的路徑長度上，另請參見路徑位置或路徑長度計算方法。默認值為<span>0.0</span></p>
<p>輔助標誌：可以用於各種目的的標誌，可以通過<span>sim.getDataOnPath</span>函數進行查詢。默認值為<span>0</span>。</p>
<p>輔助通道<span>1-4</span>：可以用於各種目的的值，可以通過<span>sim.getDataOnPath</span>函數進行查詢。默認值為<span>0.0</span></p>
<p>除了前三個值（控制點位置坐標）外，所有其他值都可以省略，在這種情況下，將應用默認值。</p>
<p>導出路徑</p>
<p>通過選擇路徑，然後單擊<span>[</span>菜單欄<span>-&gt;</span>文件<span>-&gt;</span>導出<span>-&gt;</span>選定路徑為<span>CSV ...]</span>，可以導出路徑的控制點。在這種情況下，導出格式與前面描述的路徑導入格式相同。</p>
<p>也可以通過選擇路徑，然後單擊<span>[</span>菜單欄<span>-&gt;</span>文件<span>-&gt;</span>導出<span>-&gt;</span>所選路徑的<span>Bezier</span>曲線為<span>CSV ...]</span>來導出路徑的<span>Bezier</span>點。在這種情況下，創建的文件（導出的文件）中的每一行都對應一個<span>Bezier</span>點，並包含以下值：</p>
<p><span> </span><span>x</span>，<span>y</span>，<span>z</span>，<span>alpha</span>，<span>beta</span>，<span>gamma</span>，相對速度，虛擬距離，輔助標記，輔助通道<span>1</span>，輔助通道<span>2</span>，assistantChannel3，auxiliaryChannel4</p>
<p>路徑編輯模式<span>(Path edit mode)</span></p>
<p>初步說明：路徑編輯模式是一種方便且功能齊全的編輯路徑對象的方法。但是，可以在不進入用於最小化路徑修改的路徑編輯模式的情況下移動和擦除單個路徑點（選擇單個路徑點時，請確保沒有選擇除路徑之外的其他對象）。</p>
<p>可以通過單擊相應的工具欄按鈕來訪問路徑編輯模式：</p>
<p><span><img alt="" height="37" src="/images/路徑編輯一.jpg" width="38"/> </span></p>
<p><span>[</span>路徑編輯模式工具欄按鈕<span>]</span></p>
<p><span> </span>上面的工具欄按鈕僅在選擇路徑後才有效。在路徑編輯模式下，窗口中通常顯示場景層次結構的部分用於將路徑控制點顯示為列表。可以使用鼠標選擇列表中的項目，就像在層次結構窗口中的對像一樣。</p>
<p><img alt="" height="478" src="/images/路徑編輯二.jpg" width="600"/></p>
<p><span>[</span>路徑編輯模式<span>]</span></p>
<p><span> </span>現在可以像常規對像一樣選擇單個控制點。最後選擇的控制點以白色顯示，其他選擇的控制點以黃色顯示，未選擇的控制點以藍色顯示。以類似的方式，可以使用鼠標直接平移控制點，方法是使用工具欄的對象<span>/</span>項目平移工具欄按鈕在與視圖方向垂直的平面中平移所選的控制點：</p>
<p><span><img alt="" height="37" src="/images/路徑編輯三.jpg" width="38"/> </span></p>
<p><span>[</span>對象<span>/</span>項目翻譯工具欄按鈕<span>]</span></p>
<p><span> </span>在路徑編輯模式下，將顯示路徑編輯模式對話框：</p>
<p><span> <img alt="" height="478" src="/images/路徑編輯四.jpg" width="396"/></span><span> </span></p>
<p><span>[</span>控制點屬性對話框<span>]</span></p>
<p><span> </span>路徑已關閉：如果選中，則路徑的最後一個控制點將鏈接到其第一個控制點，以關閉路徑並使其循環運行。閉合路徑至少需要<span>3</span>個控制點。</p>
<p>路徑是平坦的：如果選中，則所有控制點（以及隨後的所有<span>Bezier</span>點）都將約束到路徑對象的本地參考系的<span>z = 0</span>平面。</p>
<p>自動定向：如果啟用，則將自動計算所有控制點和貝塞爾曲線點的定向，以使該點的<span>z</span>軸沿著路徑，其<span>y</span>軸指向其曲率向外（如果啟用了<span>x up</span>，則<span>y -</span>軸沒有特別限制）。如果禁用，則用戶確定控制點的方向，貝塞爾曲線點的方向將從路徑的控制點的方向內插。</p>
<p>保持<span>x</span>向上：如果選中，則自動定向功能將使每個<span>Bezier</span>點的<span>z</span>軸沿路徑對齊，並使其<span>x</span>軸沿路徑對象的<span>z</span>軸指向。</p>
<p>清除選擇：清除控制點的選擇。</p>
<p>反轉選擇：反轉控制點的選擇狀態。</p>
<p>製作虛擬對象：在選擇控制點的位置生成虛擬對象。</p>
<p>貝塞爾曲線插值因子<span>1/2</span>：有關詳細信息，請參見控制點和貝塞爾曲線部分。</p>
<p>貝塞爾曲線點數：有關詳細信息，請參見控制點和貝塞爾曲線部分。</p>
<p>虛擬距離：有關詳細信息，請參見關於沿路徑運動的部分。</p>
<p>輔助標誌：可以用於各種目的的標誌，可以通過<span>sim.getDataOnPath</span>函數進行查詢。</p>
<p>輔助通道<span>1-4</span>：可以用於各種目的的值，可以通過<span>sim.getDataOnPath</span>函數進行查詢。</p>
<p>為了精確定位控制點，請使用坐標和變換對話框。如果要編輯控制點的方向，請確保禁用路徑的“自動方向”選項（默認情況下啟用該選項）。</p>
<p>常規鍵組合（即<span>ctrl-c</span>，<span>ctrl-v</span>，<span>delete</span>和<span>ctrl-x</span>）支持複製<span>/</span>粘貼<span>/</span>刪除<span>/</span>剪切操作。確保主視圖具有焦點，以便按鍵起作用。如果未選擇任何控制點，則黏貼操作會將復制的控制點黏貼到控制點列表的開頭，否則將黏貼到選定的控制點之後（確保不超過一個控制點）。在此階段選擇）。也可以通過彈出菜單或通過<span>[</span>主菜單<span>-&gt;</span>編輯<span>]</span>訪問相同的複制<span>/</span>黏貼<span>/</span>刪除<span>/</span>剪切功能。其他操作包括：</p>
<p>在路徑的開頭插入新的路徑點<span>/</span>選擇後插入新的路徑點：如果未選擇任何控制點，則在路徑的開頭插入新的控制點；否則，在當前選擇之後插入新的控制點（請確保沒有其他內容）在這種情況下，選擇一個控制點）。</p>
<p>從貝塞爾曲線創建新路徑：使用當前路徑的貝塞爾點生成一個新的路徑對象，即新路徑的控制點將為當前路徑的貝塞爾點。</p>
<p>超頻樹<span>(OC trees)</span></p>
<p><span>OC</span>樹是代表空間分區的對象。它由樹形數據結構組成，其中每個節點正好具有八個子代。佔用的葉節點表示為體素。<span> OC</span>樹可用於為形狀或點雲提供簡化的表示，或者可充當佔用網格<span>/</span>空間：</p>
<p><span><img alt="" height="393" src="/images/樹木3.jpg" width="527"/> </span></p>
<p><span>OC</span>樹是可碰撞，可測量和可檢測的對象。這意味著<span>OC</span>樹：</p>
<p>可用於與其他可碰撞對象的碰撞檢測。</p>
<p>可與其他可測量對像一起用於最小距離計算。</p>
<p>可以被接近傳感器檢測到。</p>
<p><span>OC</span>樹可以使用<span>[</span>菜單欄<span>-&gt;</span>添加<span>-&gt; OC</span>樹<span>]</span>添加到場景中，並通過<span>OC</span>樹屬性進行編輯。</p>
<p><span>CoppeliaSim</span>中可用的<span>OC</span>樹計算（即碰撞，距離和接近傳感器計算）也可以通過<span>Coppelia</span>幾何例程作為獨立例程使用。</p>
<p><span> </span><span>OC</span>樹屬性<span>(OC tree properties)</span></p>
<p><span>OC</span>樹屬性是場景對象屬性對話框的一部分，該對話框位於<span>[</span>菜單欄<span>-&gt;</span>工具<span>-&gt;</span>場景對象屬性<span>]</span>。您還可以通過雙擊場景層次結構中的對像圖標或單擊其工具欄按鈕來打開對話框：</p>
<p><span><img alt="" height="37" src="/images/樹木1.jpg" width="38"/> </span></p>
<p><span>[</span>場景對象屬性工具欄按鈕<span>]</span></p>
<p><span> </span>在場景對象屬性對話框中，單擊<span>OC</span>樹按鈕以顯示<span>OC</span>樹對話框（僅當最後選擇的是<span>OC</span>樹時才會顯示<span>OC</span>樹按鈕）。該對話框顯示最後選擇的<span>OC</span>樹的設置和參數：</p>
<p><span><img alt="" height="342" src="/images/樹木2.jpg" width="380"/> </span></p>
<p><span>[OC</span>樹對話框<span>]</span></p>
<p><span> </span>體素大小：<span>OC</span>樹體素的大小。大小越小，用於<span>OC</span>樹數據結構的內存就越大。</p>
<p>插入選定的可見對象：允許基於選定的可見對象插入體素。僅考慮虛擬對象，形狀，超頻樹和點雲。選擇要插入的所有對象，然後最後選擇目標<span>OC</span>樹對象。</p>
<p>減去選定的可見對象：允許基於選定的可見對象刪除體素。僅考慮虛擬對象，形狀，超頻樹和點雲。選擇要插入的所有對象，然後最後選擇目標<span>OC</span>樹對象。</p>
<p>清除<span>OC</span>樹：從<span>OC</span>樹中刪除所有體素。</p>
<p>體素具有隨機顏色：每個體素將具有隨機顏色。</p>
<p>顯示<span>OC</span>樹結構：顯示<span>OC</span>樹數據結構，主要用於調試目的。</p>
<p>顏色是自發光的：體素將以自發光的顏色顯示。</p>
<p>顯示點而不是體素：對於包含大量體素的<span>OC</span>樹，顯示可能會很慢。在這種情況下，您可以顯示像素體素，而不是立方體素。</p>
<p>調整下一次插入的顏色：允許選擇新的顏色，該顏色將用於新的體素插入。<span><br/> <br/> </span></p>
<p>點雲<span>(Point clouds)</span></p>
<p>點雲是充當基於<span>OC</span>樹的點容器的對象：</p>
<p><span> <img alt="" height="416" src="/images/雲3.jpg" width="599"/></span></p>
<p>點雲是可碰撞，可測量和可檢測的對象。這意味著點雲：</p>
<p>可用於與其他基於體積的可碰撞對象（例如<span>OC</span>樹）的碰撞檢測。</p>
<p>可與其他可測量對像一起用於最小距離計算。</p>
<p>可以被接近傳感器檢測到。</p>
<p>可以使用<span>[</span>菜單欄<span>-&gt;</span>添加<span>-&gt;</span>點雲<span>]</span>將點雲添加到場景，並通過點雲屬性進行編輯。</p>
<p><span>CoppeliaSim</span>中可用的點雲計算（即碰撞，距離和接近傳感器計算）也可以通過<span>Coppelia</span>幾何例程作為獨立例程使用。</p>
<p><span> </span>點雲屬性<span>(Point cloud properties)</span></p>
<p>點雲屬性是場景對象屬性對話框的一部分，該對話框位於<span>[</span>菜單欄<span>-&gt;</span>工具<span>-&gt;</span>場景對象屬性<span>]</span>。您還可以通過雙擊場景層次結構中的對像圖標或單擊其工具欄按鈕來打開對話框：</p>
<p><span> <img alt="" height="37" src="/images/雲1.jpg" width="38"/></span></p>
<p><span>[</span>場景對象屬性工具欄按鈕<span>]</span></p>
<p>在場景對象屬性對話框中，單擊“點雲”按鈕以顯示<span>OC</span>樹對話框（“點雲”按鈕僅在最後選擇的是點雲時出現）。該對話框顯示最後選擇的點雲的設置和參數：</p>
<p><img alt="" height="413" src="/images/雲2.jpg" width="380"/></p>
<p><span>[</span>點雲對話框<span>]</span></p>
<p>不要使用<span>OC</span>樹計算。結構：默認情況下，點雲使用類似於<span>OC</span>樹的計算結構進行有效的點操作。此結構可能會減慢插入點和刪除點的速度。如果啟用此項目，則點插入將更加有效，但是點雲將不再可碰撞，不可測量或不可檢測，並且某些其他操作也可能會受到限制。您始終可以在以後的階段或通過<span>sim.setPointCloudOptions</span>切換此項目。</p>
<p>最高體素大小：將包含點的<span>OC</span>樹體素的最大大小。大小越小，此點雲所基於的<span>OC</span>樹數據結構將使用的內存就越大。</p>
<p>最高點數<span>/</span>體素：單個<span>OC</span>樹體素可以包含的最大點數。如果需要在此類體素中存儲更多點，它將被拆分為<span>8</span>個子體素，直到滿足約束條件為止。為了有效地進行碰撞檢測，距離計算和接近傳感器檢測，建議在單個體素中存儲大約<span>10-20</span>個點。</p>
<p>插入選定的可見對象：允許基於選定的可見對象插入點。僅考慮虛擬對象，形狀，超頻樹和點雲。選擇要插入的所有對象，然後最後選擇目標點雲對象。形狀將事先轉換為具有指定構建分辨率的臨時<span>OC</span>樹。插入公差項允許通過指定用於確定是否插入點的最小距離公差來避免重複的點。插入公差<span>&gt; 0.0</span>時，點插入將變慢。</p>
<p>減去選定的可見對象：允許基於選定的可見對象減去點。僅考慮虛擬變量，超頻樹和點雲。選擇要減去的所有對象，然後最後選擇目標點雲對象。假人和點雲將使用減法公差值來標識要刪除的點。</p>
<p>清除點雲：從點雲中刪除所有點。</p>
<p>點具有隨機顏色：每個點將具有隨機顏色。</p>
<p>顯示<span>OC</span>樹結構：顯示底層<span>OC</span>樹數據結構，主要用於調試目的。</p>
<p>顏色是自發光的：點將以自發光的顏色顯示。</p>
<p>點顯示比例：包含大量點的點雲可能會減慢渲染速度。通過將比率設置為小於<span>1</span>，將為每個包含點的<span>OC</span>樹體素顯示更少的點數。這僅對顯示<span>/</span>渲染的圖像有影響。</p>
<p>點大小：點的大小，以像素為單位。</p>
<p>調整下一次插入的顏色：允許選擇一種新的顏色，該顏色將用於新的點插入。</p>
<p>外部控制器教程<span>(External controller tutorial)</span></p>
<p>在<span>CoppeliaSim</span>中，有幾種方法可以控制機器人或仿真：</p>
<p>最方便的方法是編寫一個子腳本來處理給定機器人或模型的行為。這是最方便的方法，因為子腳本直接附加到場景對象，它們將與相關的場景對像一起復制，它們不需要使用外部工具進行任何編譯，它們可以在線程或非線程模式下運行，它們可以通過自定義<span>Lua</span>函數或<span>Lua</span>擴展庫進行擴展。使用子腳本的另一個主要優點是：與本節中提到的後<span>3</span>種方法（即使用常規<span>API</span>）一樣，沒有通信延遲，並且子腳本是應用程序主線程的一部分（固有的同步操作）。但是，編寫腳本有幾個缺點：您無法選擇編程語言，不能擁有最快的代碼，並且除了<span>Lua</span>擴展庫之外，無法直接訪問外部函數庫。</p>
<p>可以控制機器人或模擬的另一種方法是編寫插件。插件機制允許使用回調機制，自定義<span>Lua</span>函數註冊，當然還可以訪問外部函數庫。插件通常與子腳本結合使用（例如，插件註冊自定義的<span>Lua</span>函數，當從子腳本中調用時，該<span>Lua</span>函數將回調特定的插件函數）。使用插件的主要優勢還在於，與本節中提到的後<span>3</span>種方法（即使用常規<span>API</span>）一樣，沒有通信延遲，並且插件是應用程序主線程的一部分（固有的同步操作）。插件的缺點是：它們的編程更加複雜，並且也需要使用外部編譯。另請參閱插件教程。</p>
<p>控制機器人或模擬的第三種方法是編寫依賴於遠程<span>API</span>的外部客戶端應用程序。如果您需要從外部應用程序，機器人或另一台計算機運行控制代碼，這是一種非常便捷的方法。這也使您可以使用與運行真實機器人完全相同的代碼來控制仿真或模型（例如虛擬機器人）。遠程<span>API</span>有兩個版本：基於<span>B0</span>的遠程<span>API</span>和舊版遠程<span>API</span>。</p>
<p><span> </span>控制機器人或仿真的第五種方法是通過<span>ROS</span>節點。<span> ROS</span>與遠程<span>API</span>相似，是使多個分佈式進程相互通信的便捷方法。儘管遠程<span>API</span>非常輕巧且快速，但它僅允許與<span>CoppeliaSim</span>通信。另一方面，<span>ROS</span>允許幾乎將任意數量的進程相互連接，並且提供了大量兼容的庫。但是，它比遠程<span>API</span>重並且更複雜。有關詳細信息，請參閱<span>ROS</span>接口。</p>
<p>控制機器人或模擬的第六種方法是通過<span>BlueZero</span>（<span>BØ</span>）節點。與<span>ROS</span>類似，<span>BlueZero</span>是使多個分佈式進程相互通信的一種便捷方法，並且是一種輕量級的跨平台解決方案。有關詳細信息，請參考<span>BlueZero</span>界面。</p>
<p>控制機器人或模擬的第七種方法是編寫一個外部應用程序，該應用程序通過各種方式（例如管道，套接字，串行端口等）與<span>CoppeliaSim</span>插件或<span>CoppeliaSim</span>腳本進行通信。選擇編程語言（可以是任何一種語言）和靈活性是兩個主要優點。同樣，控制代碼也可以在機器人或其他計算機上運行。但是，與使用遠程<span>API</span>的方法相比，這種控制仿真或模型的方法更加乏味。</p>
<p>有<span>8</span>個與本教程相關的場景文件：<span> </span></p>
<p><span>scenes / controlTypeExamples /</span>受控<span>ViaScript</span>：一個機器人是通過非線程子腳本控制的，另一個是通過線程子腳本控制的。</p>
<p><span>scenes / controlTypeExamples /</span>受控<span>ViaPlugin</span>：機器人是通過插件控制的。</p>
<p><span>scenes / controlTypeExamples / controlViaB0RemoteApi</span>：通過基於<span>B0</span>的遠程<span>API</span>來控制機器人。</p>
<p><span>scenes / controlTypeExamples /</span>受控<span>ViaLegacyRemoteApi</span>：通過舊版遠程<span>API</span>控制機器人。</p>
<p><span>scenes / controlTypeExamples / controlViaB0</span>：通過<span>BlueZero</span>界面控制機器人。</p>
<p><span>scenes / controlTypeExamples /</span>受控<span>ViaRos</span>：通過<span>ROS</span>接口控制機器人。</p>
<p><span>scenes / controlTypeExamples / controlViaRos2</span>：通過<span>ROS2</span>接口控制機器人。</p>
<p><span>scenes / controlTypeExamples /</span>受控<span>ViaTcp</span>：通過<span>LuaSocket</span>和<span>TCP</span>控制機器人。</p>
<p><span><img alt="" height="581" src="/images/輸出.jpg" width="752"/><br/></span></p>
<p>在所有<span>8</span>種情況下，都使用子腳本，主要是為了與外界建立鏈接（例如，啟動正確的客戶端應用程序，並將正確的對象句柄傳遞給它）。有兩種其他方法可以控制機器人，模擬或模擬器本身：使用自定義腳本或附加組件。但是，不建議將它們用於控制，而應使用在模擬未運行時處理功能。<span> </span></p>
<p>例如，鏈接到場景控制的<span>ViaB0RemoteApi.ttt</span>中的機器人的子腳本具有以下主要任務：</p>
<p><span> </span>使用某些對象句柄作為參數啟動控制器應用程序（<span>bubbleRobClient_b0RemoteApi</span>）。基於對象<span>B0</span>的遠程<span>API</span>的服務器功能由對象<span>b0RemoteApiServer</span>提供。</p>
<p>作為另一個示例，鏈接到場景控制的<span>ViaRos.ttt</span>中的機器人的子腳本具有以下主要任務：</p>
<p>檢查是否已加載<span>CoppeliaSim</span>的<span>ROS</span>接口</p>
<p>使用某些主題名稱或對象句柄作為參數啟動控制器應用程序（<span>rosBubbleRob</span>）</p>
<p>然而，作為另一個示例，鏈接到場景控制的<span>ViaTcp.ttt</span>中的機器人的子腳本具有以下主要任務：</p>
<p>搜索空閒的套接字連接端口</p>
<p>使用所選的連接端口作為參數啟動控制器應用程序（<span>bubbleRobServer</span>）</p>
<p>本地連接到控制器應用程序</p>
<p>在每次仿真過程中，將傳感器值發送到控制器，並從控制器讀取所需的電機值</p>
<p>在每次模擬過程中，將所需的電機值應用於機器人的關節</p>
<p>運行模擬，然後復制並粘貼機器人：您將看到重複的機器人將直接運行，因為附加的子腳本負責啟動各自外部應用程序的新實例，或調用適當的插件函數。</p>
<p><em><strong>心得</strong></em></p>
<p>CoppeliaSim 裡面有許多功能可以供我們使用，例如裡面的假人可以被用來測量與機器人的距離，可以被偵測器偵測到的，同時具有可以放在路徑上做為輔助的對象……等，在這個電子書裡讓我訝異的是他的API 不是只有Python能用而已，可以用許多程式來寫API，讓我覺得自己所學的還不太足夠應該多加努力。</p>
<h2>w6</h2>
<p><span style="color: #000000;"><em><strong>翻譯</strong></em></span></p>
<p><span>Programming Fundamentals</span></p>
<p>編程基礎</p>
<p>This chapter introduces the basic concepts of programming with Webots. Webots controllers can be written in C/C++, Java, Python or<em>MATLAB</em><sup>TM</sup>.<span> </span></p>
<p>本章介紹使用<span>Webots</span>進行編程的基本概念。<span> Webots</span>控制器可以用<span>C / C ++</span>，<span>Java</span>，<span>Python</span>或<em>MATLAB</em><sup>TM</sup>編寫。 </p>
<p><span>Besides their syntactic differences all these languages share the same low-level implementation.</span></p>
<p><span> </span>除了語法上的差異外，所有這些語言都共享相同的低階實現。</p>
<p><span> </span><span>As long as the sequence of function/method calls does not vary, every programming language will yield exactly the same simulation results.</span></p>
<p>只要函數<span>/</span>方法的調用順序不變，每種編程語言都會產生完全相同的仿真結果。</p>
<p>Hence, the concepts explained here with C examples also apply to C++, Java, Python and MATLAB.</p>
<p>因此，此處用<span>C</span>示例說明的概念也適用於<span>C ++</span>，<span>Java</span>，<span>Python</span>和<span>MATLAB</span>。</p>
<p><span>Controller Programming</span></p>
<p>控制器編程</p>
<p><span>Hello World Example</span></p>
<p><span>The tradition in computer science is to start with a "Hello World!" example. So here is a "Hello World!" example for a Webots controller:</span></p>
<p>你好世界範例</p>
<p>計算機科學的傳統始於“<span> Hello World</span>！”。 例。 這就是“<span> Hello World</span>！”<span> Webots</span>控制器的範例：</p>
<p><img alt="" height="410" src="/images/1.jpg" width="1058"/></p>
<p>This code repeatedly prints "Hello World!" to the standard output stream which is redirected to Webots console. The standard output and error streams are automatically redirected to Webots console for all Webots supported languages.</p>
<p>此代碼反复打印“ Hello World！”。 到標準輸出流，該輸出將重定向到Webots控制台。 對於所有Webots支持的語言，標準輸出和錯誤流將自動重定向到Webots控制台。</p>
<p>Webots C API (Application Programming Interface) is provided by regular C header files. These header files must be included using statements like #include &lt;webots/xyz.h&gt; where xyz represents the name of a Webots node in lowercase.</p>
<div class="tlid-input input">
<div class="source-wrap">
<div class="input-full-height-wrapper tlid-input-full-height-wrapper">
<div class="source-input">
<div class="source-footer-wrap source-or-target-footer">
<div class="source-footer">
<div class="speech-wrap source-or-target-footer-button left-positioned">
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" id="gt-speech" role="button" tabindex="0"><span class="jfk-button-img"></span></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tlid-results-container results-container">
<div class="tlid-result result-dict-wrapper">
<div class="result tlid-copy-target">
<div class="text-wrap tlid-copy-target">
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span title="">Webots C API（應用程序編程接口）由常規C頭文件提供。</span> <span class="" title="">這些頭文件必須使用#include &lt;webots / xyz.h&gt;之類的語句包括在內，其中xyz表示小寫的Webots節點的名稱。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">Like with any regular C code it is also possible to include the standard C headers, e.g. #include &lt;stdio.h&gt;. A call to the initialization wb_robot_init function is required before any other C API function call. </span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">像任何常規C代碼一樣，也可以包括標準C標頭，例如 #include &lt;stdio.h&gt;。 在調用任何其他C API函數之前，需要先調用初始化wb_robot_init函數。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">This function initializes the communication between the controller and Webots. The wb_robot_cleanup function does the opposite: it closes the communication between the controller and Webots to terminate the controller smoothly. Note that the wb_robot_init and wb_robot_cleanup functions exist only in the C API, they do not have any equivalent in the other supported programming languages.</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">該功能初始化控制器和Webot之間的通信。 wb_robot_cleanup函數的作用與此相反：它關閉了控制器和Webot之間的通信，以平滑地終止控制器。 請注意，wb_robot_init和wb_robot_cleanup函數僅存在於C API中，在其他受支持的編程語言中沒有任何等效功能。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">Usually the highest level control code is placed inside a for or a while loop. Within that loop there is a call to the wb_robot_step function. This function synchronizes the controller's data with the simulator. The wb_robot_step function needs to be present in every controller and it must be called at regular intervals, therefore it is usually placed in the main loop as in the above example.</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">通常，最高級別的控制代碼位於for或while循環內。 在該循環中，調用了wb_robot_step函數。 該功能使控制器的數據與模擬器同步。 wb_robot_step函數必須存在於每個控制器中，並且必須以規則的時間間隔調用，因此，如上例所示，通常將其放置在主循環中。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">The value 32 specifies the duration of the control steps, i.e., the wb_robot_step function shall compute 32 milliseconds of simulation and then return. This duration specifies an amount of simulated time, not real (wall clock) time, so it may actually take 1 millisecond or one minute of real time, depending on the complexity of the simulated world.</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">值32指定控制步驟的持續時間，即wb_robot_step函數應計算32毫秒的仿真，然後返回。 此持續時間指定的是模擬時間量，而不是實際（牆上時鐘）時間，因此實際時間可能需要1毫秒或1分鐘，這取決於模擬世界的複雜性。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>Note that in this "Hello World!" example, the exit condition of the </span><code>while</code><span><span> </span>loop is the return value of the<span> </span></span><code>wb_robot_step</code><span><span> </span>function. This function will indeed return<span> </span></span><code>-1</code><span><span> </span>when Webots terminates the controller (see<span> </span></span><a class="dynamicAnchor" href="https://cyberbotics.com/doc/guide/controller-programming#controller-termination">Controller Termination</a><span>). Therefore, in this example, the control loop will run as long as the simulation runs. When the loop exists, no further communication with Webots is possible and the only option is to confirm to Webots to close the communication by calling the<span> </span></span><code>wb_robot_cleanup</code><span><span> </span>function.</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0">
<div class="tlid-input input">
<div class="source-wrap">
<div class="input-full-height-wrapper tlid-input-full-height-wrapper">
<div class="source-input">
<div class="source-footer-wrap source-or-target-footer">
<div class="source-footer">
<div class="speech-wrap source-or-target-footer-button left-positioned">
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" id="gt-speech" role="button" tabindex="0"><span class="jfk-button-img"></span></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tlid-results-container results-container">
<div class="tlid-result result-dict-wrapper">
<div class="result tlid-copy-target">
<div class="result-header">
<div aria-label="收藏翻譯" class="starbutton jfk-button-flat jfk-button unstarred" data-tooltip="收藏翻譯" data-tooltip-align="t,c" role="button" tabindex="0">
<div class="jfk-button-img"></div>
</div>
</div>
<div class="text-wrap tlid-copy-target">
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span title="">請注意，在此“ Hello World！”中</span> <span class="" title="">例如，while循環的退出條件是wb_robot_step函數的返回值。</span> <span title="">當Webots終止控制器時，此函數的確會返回-1（請參閱控制器終止）。</span> <span class="" title="">因此，在此示例中，控制循環將在仿真運行期間一直運行。</span> <span class="" title="">當存在循環時，無法與Webots進行進一步的通信，並且唯一的選擇是通過調用wb_robot_cleanup函數來向Webots確認關閉通信。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">Reading Sensors</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">讀數傳感器</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">Now that we have seen how to print a message to the console, we shall see how to read the sensors of a robot. The next example does continuously update and print the value returned by a DistanceSensor:</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title="">現在，我們已經了解瞭如何將消息打印到控制台，我們將看到如何讀取機器人的傳感器。 下一個示例確實不斷更新並打印由DistanceSensor返回的值：</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><img alt="" height="640" src="/images/2.jpg" width="1056"/></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>As you can notice, prior to using a device, it is necessary to get the corresponding device tag (</span><code>WbDeviceTag</code><span>); this is done using the<span> </span></span><code>wb_robot_get_device</code><span><span> </span>function. The<span> </span></span><code>WbDeviceTag</code><span><span> </span>is an opaque type that is used to identify a device in the controller code. Note that the string passed to this function,<span> </span></span><em>"my_distance_sensor"</em><span><span> </span>in this example, refers to a device name specified in the robot description (".wbt" or ".proto" file). If the robot has no device with the specified name, this function returns 0.</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>如您所見，在使用設備之前，有必要獲取相應的設備標籤（WbDeviceTag）。 這是使用wb_robot_get_device函數完成的。 WbDeviceTag是不透明的類型，用於在控制器代碼中標識設備。 請注意，在此示例中，傳遞給此函數的字符串“ my_distance_sensor”是指機械手描述中指定的設備名稱（“ .wbt”或“ .proto”文件）。 如果機器人沒有指定名稱的設備，則此函數返回0。</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>Each sensor must be enabled before it can be used. If a sensor is not enabled it returns undefined values. Enabling a sensor is achieved by using the corresponding <code>wb_*_enable</code><span><span> </span>function, where the star (</span><code>*</code><span>) stands for the sensor type. Every<span> </span></span><code>wb_*_enable</code><span><span> </span>function allows to specify an update delay in milliseconds. The update delay specifies the desired interval between two updates of the sensor's data.</span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span>必須先啟用每個傳感器，然後才能使用它。 如果未啟用傳感器，它將返回未定義的值。 通過使用相應的wb _ * _ enable函數來啟用傳感器，其中星號（*）代表傳感器類型。 每個wb _ * _ enable函數均允許指定更新延遲（以毫秒為單位）。 更新延遲指定兩次傳感器數據更新之間的期望間隔。</span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span>In the usual case, the update delay is chosen to be similar to the control step (<code>TIME_STEP</code><span>) and hence the sensor will be updated at every<span> </span></span><code>wb_robot_step</code><span><span> </span>function call. If, for example, the update delay is chosen to be twice the control step then the sensor data will be updated every two<span> </span></span><code>wb_robot_step</code><span><span> </span>function calls: this can be used to simulate a slow device. Note that a larger update delay can also speed up the simulation, especially for CPU intensive devices like the<span> </span></span><a href="https://cyberbotics.com/doc/reference/camera">Camera</a><span>.</span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span>在通常情況下，更新延遲被選擇為與控制步驟（TIME_STEP）相似，因此傳感器將在每次wb_robot_step函數調用時進行更新。 例如，如果將更新延遲選擇為控制步驟的兩倍，則每兩個wb_robot_step函數調用將更新一次傳感器數據：這可用於模擬慢速設備。 請注意，較大的更新延遲也可以加快仿真速度，尤其是對於像相機這樣佔用大量CPU資源的設備而言。</span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span>On the contrary, it would be pointless to choose an update delay smaller than the control step, because it will not be possible for the controller to process the device's data at a higher frequency than that imposed by the control step. It is possible to disable a device at any time using the corresponding <code>wb_*_disable</code><span><span> </span>function. This may increase the simulation speed.</span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span><span></span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span><span>相反，選擇小於控制步驟的更新延遲將毫無意義，因為控制器將不可能以比控制步驟所施加的頻率更高的頻率來處理設備的數據。 使用對應的wb _ * _ disable函數可以隨時禁用設備。 這可以提高仿真速度。</span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><span><span></span></span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0">
<p>The sensor value is updated during the call to the<span> </span><code>wb_robot_step</code><span> </span>function. The call to the<span> </span><code>wb_distance_sensor_get_value</code><span> </span>function retrieves the latest value.</p>
<p>Note that some device return vector values instead of scalar values, for example these functions:</p>
<p>在調用wb_robot_step函數期間，將更新傳感器值。 調用wb_distance_sensor_get_value函數可檢索最新值。</p>
<p>請注意，某些設備返回矢量值而不是標量值，例如，以下函數：</p>
<p><img alt="" height="86" src="/images/3.jpg" width="498"/></p>
<p><span>Each function returns a pointer to three double values. The pointer is the address of an array allocated by the function internally. These arrays should never be explicitly deleted by the controller code. They will be automatically deleted when necessary. The array contains exactly three double values. Hence accessing the array beyond index 2 is illegal and may crash the controller. Finally, note that the array elements should not be modified, for this reason the pointer is declared as </span><em>const</em><span>. Here are correct examples of code using these functions:</span></p>
<p><span></span></p>
<p><span>每個函數都返回一個指向三個double值的指針。 指針是函數在內部分配的數組的地址。 這些數組絕不能由控制器代碼顯式刪除。 它們將在必要時自動刪除。 該數組恰好包含三個double值。 因此，訪問超出索引2的數組是非法的，並且可能使控制器崩潰。 最後，請注意，不應修改數組元素，因此，指針被聲明為const。 這是使用這些功能的正確代碼示例：</span></p>
<p><span><img alt="" height="500" src="/images/4.jpg" width="1056"/></span></p>
<p><span>And here are incorrect examples:</span></p>
<p><span>這是不正確的範例：</span></p>
<p><span><img alt="" height="218" src="/images/5.jpg" width="1056"/></span></p>
Using Actuators</div>
<div class="result-shield-container tlid-copy-target" tabindex="0">使用執行器</div>
<div class="result-shield-container tlid-copy-target" tabindex="0"></div>
<div class="result-shield-container tlid-copy-target" tabindex="0">
<p>The example below shows how to make a rotational motor oscillate with a 2 Hz sine signal.</p>
<p>Just like sensors, each Webots actuator must be identified by a<span> </span><code>WbDeviceTag</code><span> </span>returned by the<span> </span><code>wb_robot_get_device</code><span> </span>function. However, unlike sensors, actuators don't need to be expressly enabled; they actually don't have<span> </span><code>wb_*_enable</code><span> </span>functions.</p>
<p>以下示例顯示瞭如何使旋轉電機以2 Hz正弦信號振盪。</p>
<p>就像傳感器一樣，每個Webots執行器都必須由wb_robot_get_device函數返回的WbDeviceTag進行標識。 但是，與傳感器不同的是，無需明確啟用執行器。 他們實際上沒有wb _ * _ enable函數。</p>
<p><span>To control a motion, it is generally useful to decompose that motion in discrete steps that correspond to the control step. As before, an infinite loop is used here: at each iteration a new target position is computed according to a sine equation. The </span><code>wb_motor_set_position</code><span><span> </span>function stores a new position request for the corresponding rotational motor. Note that the<span> </span></span><code>wb_motor_set_position</code><span><span> </span>function stores the new position, but it does not immediately actuate the motor. The effective actuation starts on the next line, in the call to the<span> </span></span><code>wb_robot_step</code><span><span> </span>function.</span></p>
<p><span>為了控制運動，通常以與控制步驟相對應的離散步驟分解該運動。 如前所述，這裡使用了無限循環：在每次迭代中，根據正弦方程計算新的目標位置。 wb_motor_set_position函數存儲相應旋轉電機的新位置請求。 請注意，wb_motor_set_position函數存儲新位置，但不會立即啟動電動機。 有效的致動從對wb_robot_step函數的調用的下一行開始。</span></p>
<p><span>The <code>wb_robot_step</code><span><span> </span>function sends the actuation command to the<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotor</a><span><span> </span>but it does not wait for the<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotor</a><span><span> </span>to complete the motion (i.e. reach the specified target position); it just simulates the motor's motion for the specified number of milliseconds.</span></span></p>
<p><span><span>wb_robot_step函數將致動命令發送到RotationalMotor，但不等待RotationalMotor完成運動（即到達指定的目標位置）； 它只是在指定的毫秒數內模擬電動機的運動。</span></span></p>
<p><span><span><img alt="" height="721" src="/images/6.jpg" width="1054"/></span></span></p>
<p><span><span>When the <code>wb_robot_step</code><span><span> </span>function returns, the motor has moved by a certain (linear or rotational) amount which depends on the target position, the duration of the control step (specified with the<span> </span></span><code>wb_robot_step</code><span><span> </span>function argument), the velocity, acceleration, force, and other parameters specified in the ".wbt" description of the<span> </span></span><code>Motor</code><span>.<span> </span></span></span></span></p>
<p><span><span><span>當wb_robot_step函數返回時，電機已移動了一定量（線性或旋轉），具體取決於目標位置，控制步驟的持續時間（由wb_robot_step函數參數指定），速度，加速度，力等 電動機的“ .wbt”描述中指定的參數。</span></span></span></p>
<p><span><span><span>For example, if a very small control step or a low motor velocity is specified, the motor will not have moved much when the <code>wb_robot_step</code><span><span> </span>function returns. In this case several control steps are required for the<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotor</a><span><span> </span>to reach the target position. If a longer duration or a higher velocity is specified, then the motor may have fully completed the motion when the<span> </span></span><code>wb_robot_step</code><span><span> </span>function returns.</span></span></span></span></p>
<p><span><span><span><span>例如，如果指定了非常小的控制步長或較低的電動機速度，則當wb_robot_step函數返回時，電動機將不會移動太多。 在這種情況下，RotationalMotor需要幾個控制步驟才能達到目標位置。 如果指定了更長的持續時間或更高的速度，則當wb_robot_step函數返回時，電動機可能已完全完成運動。</span></span></span></span></p>
<p><span><span><span><span>Note that the <code>wb_motor_set_position</code><span><span> </span>function only specifies the<span> </span></span><em>desired</em><span><span> </span>target position. Just like with real robots, it is possible (in physics-based simulations only), that the<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotor</a><span><span> </span>is not able to reach this position, because it is blocked by obstacles or because the motor's torque (</span><code>maxForce</code><span>) is insufficient to oppose gravity, etc.</span></span></span></span></span></p>
<p><span><span><span><span><span>請注意，wb_motor_set_position函數僅指定所需的目標位置。 就像真正的機器人一樣，RotationalMotor有可能（僅在基於物理的模擬中）無法到達此位置，原因是它被障礙物阻擋，或者因為電動機的扭矩（maxForce）不足以抵抗重力等。 </span></span></span></span></span></p>
<p><span><span><span><span><span>If you want to control the motion of several <a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotors</a><span><span> </span>simultaneously, then you need to specify the desired position for each<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotor</a><span><span> </span>separately, using the<span> </span></span><code>wb_motor_set_position</code><span><span> </span>function. Then you need to call the<span> </span></span><code>wb_robot_step</code><span><span> </span>function once to actuate all the<span> </span></span><a href="https://cyberbotics.com/doc/reference/rotationalmotor">RotationalMotors</a><span><span> </span>simultaneously.</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>如果要同時控制多個RotationalMotor的運動，則需要使用wb_motor_set_position函數分別為每個RotationalMotor指定所需的位置。 然後，您需要調用wb_robot_step函數一次以同時啟動所有RotationalMotor。</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>The "step" and "wb_robot_step" Functions</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>“步驟”和“ wb機器人步驟”功能</span></span></span></span></span></span></p>
<p>Webots uses two different time steps:</p>
<ul>
<li>The simulation step (specified in the Scene Tree:<span> </span><code>WorldInfo.basicTimeStep</code>)</li>
<li>The control step (specified as an argument of the<span> </span><code>wb_robot_step</code><span> </span>function for each robot)</li>
</ul>
<p>Webots使用兩個不同的時間步驟：</p>
<p>模擬步驟（在“場景樹”中指定：WorldInfo.basicTimeStep）<br/>控制步驟（指定為每個機器人的wb_robot_step函數的參數）</p>
<p><span>The simulation step is the value specified in </span><code>WorldInfo.basicTimeStep</code><span><span> </span>(in milliseconds). It indicates the duration of one step of simulation, i.e. the time interval between two computations of the position, speed, collisions, etc. of every simulated object. If the simulation uses physics (vs. kinematics), then the simulation step also specifies the interval between two computations of the forces and torques that need to be applied to the simulated rigid bodies.</span></p>
<p><span>模擬步驟是WorldInfo.basicTimeStep中指定的值（以毫秒為單位）。 它指示了一個模擬步驟的持續時間，即每個模擬對象的位置，速度，碰撞等兩次計算之間的時間間隔。 如果模擬使用物理學（相對於運動學），則模擬步驟還指定需要對模擬剛體施加力和扭矩的兩次計算之間的間隔。</span></p>
<p><span>The control step is the duration of an iteration of the control loop. It corresponds to the parameter passed to the <code>wb_robot_step</code><span><span> </span>function. The<span> </span></span><code>wb_robot_step</code><span><span> </span>function advances the controller time of the specified duration. It also synchronizes the sensors and actuators data with the simulator according to the controller time.</span></span></p>
<p><span><span>控制步驟是控制循環迭代的持續時間。 它對應於傳遞給wb_robot_step函數的參數。 wb_robot_step函數可將指定時間的控制器時間提前。 它還根據控制器時間將傳感器和執行器的數據與模擬器同步。</span></span></p>
<p><span><span>Every controller needs to call the <code>wb_robot_step</code><span><span> </span>function at regular intervals. If a controller does not call the<span> </span></span><code>wb_robot_step</code><span><span> </span>function, then the sensors and actuators won't be updated and the simulator will block (in synchronous mode only). Because it needs to be called regularly, the<span> </span></span><code>wb_robot_step</code><span><span> </span>function call is usually placed in the main loop of the controller.</span></span></span></p>
<p><span><span><span>每個控制器都需要定期調用wb_robot_step函數。 如果控制器未調用wb_robot_step函數，則不會更新傳感器和執行器，並且模擬器將阻塞（僅在同步模式下）。 由於需要定期調用，因此wb_robot_step函數調用通常位於控制器的主循環中。</span></span></span></p>
<p><span><span><span>The execution of a simulation step is an atomic operation: it cannot be interrupted. Hence a sensor measurement or a motor actuation can only take place between two simulation steps. For that reason the control step specified with each <code>wb_robot_step</code><span><span> </span>function calls must be a multiple of the simulation step. So, for example, if the simulation step is 16 ms, then the control step argument passed to the<span> </span></span><code>wb_robot_step</code><span><span> </span>function can be 16, 32, 64, 128, etc.</span></span></span></span></p>
<p><span><span><span><span>模擬步驟的執行是一項原子操作：不能中斷。 因此，傳感器測量或電機驅動只能在兩個模擬步驟之間進行。 因此，每個wb_robot_step函數調用指定的控制步驟必須是模擬步驟的倍數。 因此，例如，如果模擬步驟為16 ms，則傳遞給wb_robot_step函數的控制步驟參數可以為16、32、64、128等。</span></span></span></span></p>
<p><span><span><span><span>If the simulation is run in step-by-step mode, i.e., by clicking on the <strong>Step</strong><span><span> </span>button (see<span> </span></span><a class="dynamicLoad" href="https://cyberbotics.com/doc/guide/the-user-interface">The User Interface</a><span><span> </span>section), then a single step having the simulation step duration is executed. The following<span> </span></span><a class="dynamicAnchor" href="https://cyberbotics.com/doc/guide/controller-programming#synchronization-of-simulation-and-controller-steps">figure</a><span><span> </span>depicts in details the synchronization between the simulation status, the controller status and the step clicks.</span></span></span></span></span></p>
<p><span><span><span><span><span>如果仿真以逐步模式運行，即通過單擊“步進”按鈕（請參見“用戶界面”部分），則將執行具有仿真步長的單個步驟。 下圖詳細描述了仿真狀態，控制器狀態和步驟咔嗒聲之間的同步。</span></span></span></span></span></p>
<p><span><span><span><span><span><img alt="" height="400" src="/images/7.png" width="275"/></span></span></span></span></span></p>
<p><span><span><span><span><span>At every step, all the commands before the <code>wb_robot_step</code><span><span> </span>function call statements are executed first and the simulation stops in the middle of the execution of the<span> </span></span><code>wb_robot_step</code><span><span> </span>function. Webots API functions are executed but they are applied to the simulation world only when calling the<span> </span></span><code>wb_robot_step</code><span><span> </span>function, that is when the controller process communicates with Webots process. When the simulation stops, the new simulation status has already been computed, the simulation time has been updated and the new sensors values are ready. Note that the first step includes the initialization too. So all the statements before the second<span> </span></span><code>wb_robot_step</code><span><span> </span>function call are executed.</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>在每個步驟中，首先執行wb_robot_step函數調用語句之前的所有命令，並且模擬在wb_robot_step函數執行的中間停止。 Webots API函數已執行，但僅在調用wb_robot_step函數時（即，控制器進程與Webots進程進行通信時），它們才被應用到仿真世界。 模擬停止時，已經計算出新的模擬狀態，更新了模擬時間，並且準備了新的傳感器值。 請注意，第一步也包括初始化。 因此，第二個wb_robot_step函數調用之前的所有語句都將執行。</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>Using Sensors and Actuators Together</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>一起使用傳感器和執行器</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>Webots and each robot controller are executed in separate processes. For example, if a simulation involves two robots, there will be three processes in total: one for Webots and two for the two robots. Each controller process exchanges sensors and actuators data with the Webots process during the <code>wb_robot_step</code><span><span> </span>function calls. So for example, the<span> </span></span><code>wb_motor_set_position</code><span><span> </span>function does not immediately send the data to Webots. Instead it stores the data locally and the data is effectively sent when the<span> </span></span><code>wb_robot_step</code><span><span> </span>function is called.</span></span></span></span></span></span></span></p>
<div class="tlid-results-container results-container">
<div class="tlid-result result-dict-wrapper">
<div class="result tlid-copy-target">
<div class="text-wrap tlid-copy-target">
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span title="">Webot和每個機器人控制器在單獨的過程中執行。</span> <span class="" title="">例如，如果一個模擬涉及兩個機器人，則總共將有三個過程：一個用於Webot，兩個用於兩個機器人。</span> <span class="" title="">在wb_robot_step函數調用期間，每個控制器進程都與Webots進程交換傳感器和執行器數據。</span> <span class="" title="">因此，例如，wb_motor_set_position函數不會立即將數據發送到Webots。</span> <span class="" title="">相反，它在本地存儲數據，並且在調用wb_robot_step函數時有效地發送了數據。</span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>For that reason the following code snippet is a bad example. Clearly, the value specified with the first call to the </span><code>wb_motor_set_position</code><span><span> </span>function will be overwritten by the second call:</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>因此，以下代碼段是一個不好的示例。 顯然，第一次調用wb_motor_set_position函數指定的值將被第二次調用覆蓋：</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><img alt="" height="134" src="/images/8.jpg" width="900"/></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>Similarly this code does not make much sense either:</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>同樣，此代碼也沒有太大意義：</span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><img alt="" height="215" src="/images/9.jpg" width="690"/></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span>Since there was no call to the <code>wb_robot_step</code><span><span> </span>function between the two sensor readings, the values returned by the sensor cannot have changed in the meantime. A working version would look like this:</span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span>由於在兩個傳感器讀數之間沒有調用wb_robot_step函數，因此在此期間傳感器返回的值不能更改。 工作版本如下所示：</span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span><img alt="" height="281" src="/images/10.jpg" width="638"/></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0"><span class="tlid-translation translation" lang="zh-TW"><span class="" title=""><span><span></span></span></span></span></div>
<div class="result-shield-container tlid-copy-target" tabindex="0">
<p>However, the generally recommended approach is to have a single<span> </span><code>wb_robot_step</code><span> </span>function call in the main control loop, and to use it to update all the sensors and actuators simultaneously, like this:</p>
<pre>但是，通常建議的方法是在主控制循環中只有一個wb_robot_step函數調用，並使用它同時更新所有傳感器和執行器，如下所示：<br/><br/><img alt="" height="161" src="/images/11.jpg" width="555"/></pre>
<p><span>Note that it is important to call the </span><code>wb_robot_step</code><span><span> </span>function at the beginning of the loop, in order to make sure that the sensors already have valid values prior to entering the<span> </span></span><code>readSensors</code><span><span> </span>function. Otherwise the sensors will have undefined values during the first iteration of the loop, hence, the following is not a good example:</span></p>
<p><span>請注意，在循環開始時調用wb_robot_step函數很重要，以確保在進入readSensors函數之前傳感器已經具有有效值。 否則，在循環的第一次迭代中，傳感器將具有不確定的值，因此，以下示例不是一個好例子：</span></p>
<p><span><img alt="" height="165" src="/images/12.jpg" width="983"/></span></p>
<p><span>Here is a complete example of using sensors and actuators together. The robot used here is using differential steering. It uses two proximity sensors (<a href="https://cyberbotics.com/doc/reference/distancesensor">DistanceSensor</a><span>) to detect obstacles.</span></span></p>
<p><span><span>這是一起使用傳感器和執行器的完整示例。 這裡使用的機器人正在使用差速轉向。 它使用兩個接近傳感器（DistanceSensor）來檢測障礙物。</span></span></p>
<p><span><span><img alt="" height="755" src="/images/13.jpg" width="703"/></span></span></p>
<p><span><span>Using Controller Arguments</span></span></p>
<p><span><span>使用控制器參數</span></span></p>
<p><span><span>In the ".wbt" file, it is possible to specify arguments that are passed to a controller when it starts. They are specified in the controllerArgs field of the Robot node, and they are passed as parameters of the main function. For example, this can be used to specify parameters that vary for each robot's controller.<br/>For example if we have:</span></span></p>
<p><span><span>在“ .wbt”文件中，可以指定啟動時傳遞給控制器的參數。 它們在Robot節點的controllerArgs字段中指定，並作為主函數的參數傳遞。 例如，可用於指定隨每個機器人控制器而變化的參數。<br/>例如，如果我們有：</span></span></p>
<p><span><span><img alt="" height="125" src="/images/14.jpg" width="543"/></span></span></p>
<p><span><span>And if the controller's name is <em>"demo"</em><span>, then this sample controller code:</span></span></span></p>
<p><span><span><span>如果控制器的名稱為“ demo”，則此示例控制器代碼為：</span></span></span></p>
<p><span><span><span><img alt="" height="280" src="/images/15.jpg" width="433"/></span></span></span></p>
<p><span><span><span>This will print:</span></span></span></p>
<p><span><span><span>這將打印：</span></span></span></p>
<p><span><span><span><img alt="" height="108" src="/images/16.jpg" width="261"/></span></span></span></p>
<p><span><span><span>Controller Termination</span></span></span></p>
<p><span><span><span>控制器終端</span></span></span></p>
<p><span><span><span>Usually a controller process runs in an endless loop: it is terminated (killed) when Webots quits, the simulation is reset, the world is reloaded, a new simulation is loaded, or the controller name is changed in the Webots scene tree. The controller cannot prevent its own termination but it can be notified shortly before this happens. </span></span></span></p>
<p><span><span><span>通常，控制器進程會無休止地運行：當Webots退出，模擬被重置，世界被重新加載，新的模擬被加載或者Webots場景樹中的控制器名稱被更改時，它終止（被殺死）。 控制器無法阻止其自身終止，但是可以在發生這種情況之前立即通知控制器。</span></span></span></p>
<p><span><span><span>The <code>wb_robot_step</code><span><span> </span>function returns -1 when the controller process is going to be terminated by Webots. Then the controller has 1 second (real time) to save important data, close files, etc. before it is effectively killed by Webots. Here is an example that shows how to save data before the upcoming termination:</span></span></span></span></p>
<p><span><span><span><span>當控制器進程將由Webots終止時，wb_robot_step函數返回-1。 然後，控制器將有1秒（實時）的時間來保存重要數據，關閉文件等，直到Webots有效地將其殺死。 這是顯示如何在即將終止之前保存數據的示例：</span></span></span></span></p>
<p><span><span><span><span><img alt="" height="481" src="/images/17.jpg" width="511"/></span></span></span></span></p>
<p><span><span><span><span>In some cases, it is up to the controller to make the decision of terminating the simulation. For example in the case of search and optimization algorithms: the search may terminate when a solution is found or after a fixed number of iterations (or generations).</span></span></span></span></p>
<p><span><span><span><span>在某些情況下，取決於控制器來決定終止仿真。 例如，在搜索和優化算法的情況下：當找到解決方案時或在固定數量的迭代（或生成）之後，搜索可能會終止。</span></span></span></span></p>
<p><span><span><span><span>In this case the controller should just save the experiment results and quit by returning from the <code>main</code><span><span> </span>function or by calling the<span> </span></span><code>exit</code><span><span> </span>function. This will terminate the controller process and freeze the simulation at the current simulation step. The physics simulation and every robot involved in the simulation will stop.</span></span></span></span></span></p>
<p><span><span><span><span><span>在這種情況下，控制器應只保存實驗結果並通過從主函數返回或調用退出函數退出。 這將終止控制器過程並凍結當前模擬步驟的模擬。 物理模擬以及模擬中涉及的每個機器人都將停止。</span></span></span></span></span></p>
<p><span><span><span><span><span><img alt="" height="121" src="/images/18.jpg" width="341"/></span></span></span></span></span></p>
<p><span><span><span><span><span>If only one robot controller needs to terminate but the simulation should continue with the other robots, then the terminating robot should call the <code>wb_robot_cleanup</code><span><span> </span>function right before quitting:</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>如果僅一個機器人控制器需要終止，而仿真應與其他機器人繼續進行，則終止的機器人應在退出之前立即調用wb_robot_cleanup函數：</span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><img alt="" height="145" src="/images/19.jpg" width="376"/></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span>Note that the exit status as well as the value returned by the <code>main</code><span><span> </span>function are ignored by Webots.</span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span>請注意，Webots會忽略退出狀態以及主函數返回的值。</span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span>Shared Libraries</span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span>共享庫</span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span>Creating shared libraries can be very useful to share code between controllers and/or plugins. There are several ways to do so, but we recommend to place them into a subdirectory of the <code>libraries</code><span><span> </span>directory of your project. Indeed the environment variables of the controllers are modified to include these paths into your [[DY]LD_LIBRARY_]PATH environment variable (depending on the OS). Moreover the main Makefile ("</span><a href="https://github.com/cyberbotics/webots/tree/master/resources/Makefile.include" target="_blank">WEBOTS_HOME/resources/Makefile.include</a><span>") used to compile Webots controllers is able to create shared libraries and to link easily with the Controller libraries, ODE or the Qt framework.</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>創建共享庫對於在控制器和/或插件之間共享代碼非常有用。 有幾種方法可以這樣做，但是我們建議將它們放在項目庫目錄的子目錄中。 實際上，已修改控制器的環境變量，以將這些路徑包括到您的[[DY] LD_LIBRARY_] PATH環境變量中（取決於OS）。 此外，用於編譯Webots控制器的主要Makefile（“ WEBOTS_HOME / resources / Makefile.include”）能夠創建共享庫，並可以輕鬆地與Controller庫，ODE或Qt框架鏈接。</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>A good example of this is the Qt utility library located there: "WEBOTS_HOME/resources/projects/libraries/qt_utils".<br/>If for some reason shared libraries cannot be in the libraries directory, the WEBOTS_LIBRARY_PATH environment variable will be very helpful. The paths it contains will be added at the beginning of the library search path([[DY]LD_LIBRARY_]PATH) when starting the controller.</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>一個很好的例子是位於此處的Qt實用程序庫：“ WEBOTS_HOME / resources / projects / libraries / qt_utils”。<br/>如果由於某種原因共享庫不能位於庫目錄中，則WEBOTS_LIBRARY_PATH環境變量將非常有幫助。 啟動控制器時，它包含的路徑將添加到庫搜索路徑（[[DY] LD_LIBRARY_] PATH）的開頭。</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>Environment Variables</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>環境變量</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>For some projects it will be necessary to define or change variables defined in your environment. They can be changed in the settings of the computer but it may last only for the current session or create conflict with other applications or projects. Webots offers an elegant solution to this. A configuration file named "runtime.ini" can be added to the controller directory. Any environment variable defined in this file will be loaded to the environment each time the controller starts.</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>對於某些項目，有必要定義或更改在您的環境中定義的變量。 可以在計算機的設置中更改它們，但可能僅持續當前會話，或者與其他應用程序或項目產生衝突。 Webots為此提供了一個優雅的解決方案。 可以將名為“ runtime.ini”的配置文件添加到控制器目錄。 每次控制器啟動時，此文件中定義的任何環境變量都會加載到環境中。</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>This configuration file uses the standard INI template that is really simple and easy to write and read. It contains pairs of key and value that can be inside [sections]. Comments can be written on a line after using a semicolon ';' character.<br/>Environment variables in this file can contain references to other environment variables using this syntax : $(MY_VARIABLE_NAME). They will be automatically replaced by the actual value already existing in the environment. The Webots "runtime.ini" supports 7 sections:</span></span></span></span></span></span></span></span></p>
<p><span><span><span><span><span><span><span><span>此配置文件使用標準的INI模板，該模板非常簡單，易於讀寫。 它包含可以在[sections]內部的鍵和值對。 使用分號“;”後可以在一行上寫註釋。 字符。<br/>該文件中的環境變量可以使用以下語法包含對其他環境變量的引用：$（MY_VARIABLE_NAME）。 它們將自動替換為環境中已經存在的實際值。 Webots的“ runtime.ini”支持7個部分：</span></span></span></span></span></span></span></span></p>
<ul>
<li>
<p><code>[environment variables with paths]</code></p>
<p>This section should only contain environment variables with either relative or absolute paths. Paths must be separated using the colon symbol ':' and directory components must be separated using the slash symbol '/'. Variables declared in this section will be added on every platform. On Windows, colons will be replaced by semicolon and slash will be replaced by backslash according to the Windows syntax.</p>
</li>
<li>
<p><code>[environment variables]</code></p>
<p>Environment variables defined in this section will also be added to the environment on every platform but they will be written directly with no syntax change. It's a good location for variables that don't contain any path.</p>
</li>
<li>
<p><code>[environment variables for Windows]</code></p>
<p>Variables defined in this section will only be added to the environment if the controller is ran on the Windows platform. If you want to declare paths in this section, the value should be written between double-quotes symbols ".</p>
</li>
<li>
<p><code>[environment variables for macOS]</code></p>
<p>Variables defined here will only be added on macOS and ignored on other platforms.</p>
</li>
<li>
<p><code>[environment variables for Linux]</code></p>
<p>Variables defined here will be added on all Linux platforms but not on Mac nor Windows.</p>
</li>
<li>
<p><code>[environment variables for Linux 32]</code></p>
<p>These variables will be added only if the Linux platform is 32 bit.</p>
</li>
<li>
<p><code>[environment variables for Linux 64]</code></p>
<p>These variables will be added only if the Linux platform is 64 bit.</p>
</li>
</ul>
<p>[帶路徑的環境變量]</p>
<p>此部分應僅包含具有相對路徑或絕對路徑的環境變量。路徑必須使用冒號'：'分隔，目錄組件必須使用斜杠'/'分隔。本節中聲明的變量將在每個平台上添加。在Windows上，根據Windows語法，冒號將由分號替換，斜杠將由反斜杠替換。</p>
<p>[環境變量]</p>
<p>本節中定義的環境變量也將添加到每個平台的環境中，但是它們將直接編寫而無需更改語法。對於不包含任何路徑的變量，這是一個很好的位置。</p>
<p>[Windows環境變量]</p>
<p>僅當在Windows平台上運行控制器時，才會將本節中定義的變量添加到環境中。如果要在本節中聲明路徑，則應在雙引號符號“之間寫入值。</p>
<p>[macOS的環境變量]</p>
<p>此處定義的變量將僅在macOS上添加，而在其他平台上被忽略。</p>
<p>[Linux的環境變量]</p>
<p>此處定義的變量將在所有Linux平台上添加，但不會在Mac和Windows上添加。</p>
<p>[Linux 32的環境變量]</p>
<p>僅當Linux平台為32位時，才添加這些變量。</p>
<p>[Linux 64的環境變量]</p>
<p>僅當Linux平台是64位時，才添加這些變量。</p>
<p><span>Here is an example of a typical runtime.ini file.</span></p>
<p><span>這是典型的runtime.ini文件的示例。</span></p>
<p><span><img alt="" height="321" src="/images/20.jpg" width="553"/></span></p>
<p><span>Languages Settings</span></p>
<p>語言設定</p>
<p><span>The "runtime.ini" file may also contain language specific sections, named </span><code>[java]</code><span>,<span> </span></span><code>[python]</code><span><span> </span>and<span> </span></span><code>[matlab]</code><span>. Each of this section may include two keys, namely<span> </span></span><code>COMMAND</code><span><span> </span>and<span> </span></span><code>OPTIONS</code><span>. The<span> </span></span><code>COMMAND</code><span><span> </span>key allows you to define a specific version of the language interpreter whereas the<span> </span></span><code>OPTIONS</code><span><span> </span>key allows you to access specific options that will be passed immediately to the language interpreter. For example:</span></p>
<p><span>“ runtime.ini”文件還可能包含特定於語言的部分，名為[java]，[python]和[matlab]。 每個部分都可以包括兩個鍵，即COMMAND和OPTIONS。 COMMAND鍵允許您定義語言解釋器的特定版本，而OPTIONS鍵則允許您訪問將立即傳遞給語言解釋器的特定選項。 例如：</span></p>
<p><span><img alt="" height="124" src="/images/21.jpg" width="413"/></span></p>
<p><span>In the example above, the resulting command issued by Webots will be: <code>/opt/local/bin/python2.7 -m package.name.given my_controller.py</code><span><span> </span>possibly followed by the value of the<span> </span></span><code>controllerArgs</code><span><span> </span>field of the corresponding<span> </span></span><a href="https://cyberbotics.com/doc/reference/robot">Robot</a><span><span> </span>node.</span></span></p>
<p><span><span>在上面的示例中，Webots發出的結果命令將是：/opt/local/bin/python2.7 -m package.name.given my_controller.py，其後可能是相應Robot節點的controllerArgs字段的值。</span></span></p>
<p><span><span><img alt="" height="196" src="/images/22.jpg" width="419"/></span></span></p>
<p><span><span><img alt="" height="123" src="/images/23.jpg" width="703"/></span></span></p>
<p><span><span></span></span></p>
<div class="tlid-input input">
<div class="source-wrap">
<div class="input-full-height-wrapper tlid-input-full-height-wrapper">
<div class="source-input">
<div class="source-footer-wrap source-or-target-footer">
<div class="source-footer">
<div class="speech-wrap source-or-target-footer-button left-positioned">
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" id="gt-speech" role="button" tabindex="0"><em><strong><span class="jfk-button-img" style="color: #000000;">Python Example</span></strong></em></div>
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" role="button" tabindex="0"><em><strong><span class="jfk-button-img" style="color: #000000;">Python範例</span></strong></em></div>
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" role="button" tabindex="0"><em><strong><span class="jfk-button-img" style="color: #000000;"></span></strong></em></div>
<div aria-disabled="false" aria-label="開啟語音輸入功能" aria-pressed="false" class="speech-button goog-toolbar-button" data-tooltip="開啟語音輸入功能" data-tooltip-align="t,c" role="button" tabindex="0"><em><strong><span class="jfk-button-img" style="color: #000000;"><img alt="" height="664" src="/images/24.jpg" width="1055"/></span></strong></em></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>